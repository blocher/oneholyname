<?php // Before trying to crack the plugin, please consider buying a pro license at http://www.mapsmarker.com. I have put hundreds of hours into the development of the plugin and without honest customers I will not be able to continue the development and support. Thanks for your understanding and your honesty! Robert
if (basename($_SERVER["\123CRIPT_FILEN\101\115\105"]) == "leaflet-core.php") { exit ("\120\154ease do not\040\141ccess this fi\154\145\040directly.\040\124hanks!<br/><a\040\150ref='https:\057\057\167ww.maps\155\141\162ker.co\155\057\147o'>www\056\155\141psmark\145\162\056com</a>"); } if (is_admin()) { include_once (ABSPATH."wp-admin".DIRECTORY_SEPARATOR."includes".DIRECTORY_SEPARATOR."plugin.php"); if (is_plugin_active("leaflet-maps-mark\145\162\057leaflet-ma\160\163\055marker.ph\160")) { if (!is_multisite()) { deactivate_plugins("lea\146\154\145t-maps-marker\057\154\145aflet-maps-m\141\162\153er.php",$silent=FALSE,$network_wide=NULL); activate_plugin("\154eaflet-maps-marke\162\055\160ro/leaflet\055\155\141ps-marker\056\160\150p",$redirect="plugins.php?a\143\164ivate=true",$network_wide=FALSE,$silent=FALSE); } else { include_once (ABSPATH."wp-includes".DIRECTORY_SEPARATOR."pluggable.\160\150\160"); if (is_network_admin()) { deactivate_plugins("leaflet-maps-mar\153\145\162/leaflet-map\163\055\155arker.php",$silent=FALSE,$network_wide=TRUE); activate_plugin("le\141\146\154et-maps-marke\162\055\160ro/leaflet\055\155\141ps-marker.\160\150\160",$redirect=FALSE,$network_wide=TRUE,$silent=FALSE); } else { deactivate_plugins("\154eaflet-maps-m\141\162\153er/leaflet-ma\160\163\055marker.php",$silent=FALSE,$network_wide=NULL); activate_plugin("\154\145\141flet-maps-mar\153\145\162-pro/leaflet\055\155\141ps-marker\056\160\150p",$redirect="p\154\165gins.php?activ\141\164\145=true",$network_wide=FALSE,$silent=FALSE); } } } } define( "l0" ,"\167\060\06088203141x"); define( "LEAFLET_WP_ADMIN_URL" ,get_admin_url()); define( "LEAFLET_PLUGIN_URL" ,plugin_dir_url( __FILE__)); define( "LEAFLET_PLUGIN_DIR" ,plugin_dir_path( __FILE__)); $O0=wp_upload_dir(); define( "LEAFLET_PLUGIN_ICONS_URL" ,$O0["baseurl"]."/leaflet-maps-mar\153\145\162-icons"); define( "LEAFLET_PLUGIN_ICONS_DIR" ,$O0["bas\145\144\151r"].DIRECTORY_SEPARATOR."leaflet-maps-marke\162\055\151cons"); define( "LEAFLET_PLUGIN_QR_URL" ,$O0["baseurl"]."\057leaflet-maps-\155\141\162ker-qr-codes"); define( "LEAFLET_PLUGIN_QR_DIR" ,$O0["\142\141\163edir"].DIRECTORY_SEPARATOR."leaflet-map\163\055\155arker-qr-co\144\145\163"); define( "l1" ,get_admin_url()); define( "O1" ,plugin_dir_url( __FILE__)); define( "l2" ,plugin_dir_path( __FILE__)); define( "O2" ,$O0["\142\141\163eurl"]."/leaflet-maps-mar\153\145\162-icons"); define( "l3" ,$O0["basedir"].DIRECTORY_SEPARATOR."leaflet-maps-\155\141\162ker-icons"); if (is_admin()) { require_once (plugin_dir_path( __FILE__)."inc".DIRECTORY_SEPARATOR."\143lass-plugin-up\144\141\164e-checker.php"); } function O3() { if ((substr($_SERVER["R\105\115\117TE_ADDR"],0,4) == "127.") || ($_SERVER["REM\117\124\105_ADDR"] == "\072:1")) { return TRUE; } else { return FALSE; } } class l4 { function __construct() { $O4=get_option("leafletma\160\163\155arker_option\163"); add_action("init",array( &$this,"\154mm_load_translatio\156\137\146iles"),1); add_action("ad\155\151\156_init",array( &$this,"lmm_load_setting\163\137\143lass"),2); add_action("\141dmin_init",array( &$this,"lmm_install_an\144\137\165pdates"),3); add_action("\167p_enqueue_scri\160\164\163",array( &$this,"lmm_fronte\156\144\137enqueue_scrip\164\163")); add_action("\167\160_print_styles",array( &$this,"lmm_\146\162\157ntend_enqueue_\163\164\171lesheets"),4); add_action("\141\144min_menu",array( &$this,"lmm_admin_menu"),5); add_action("\141dmin_init",array( &$this,"\154mm_plugin_me\164\141\137links"),6); add_action("admin_bar_men\165",array( &$this,"lmm_add_admi\156\137\142ar_menu"),0225); if (!empty($O4)) { add_shortcode($O4["\163\150ortcode"],array( &$this,"\154\155\155_showmap")); } add_filter("\167\151\144get_text","\144\157\137shortcode"); if ( isset ($O4["\155\151\163c_global_adm\151\156\137notices"]) && ($O4["\155\151\163c_global_admi\156\137\156otices"] == "show")) { add_action("admin_notices",array( &$this,"lmm_compat\151\142\151lity_checks")); } if (!empty($O4)) { if ($O4["\155\151\163c_add_georss_to\137\150\145ad"] == "enabled") { add_action("wp_head",array( &$this,"\154mm_add_georss_\164\157\137head")); } } if ( isset ($O4["\155\151\163c_tinymce_bu\164\164\157n"]) && ($O4["\155\151sc_tinymce_butt\157\156"] == "\145\156abled")) { require_once (plugin_dir_path( __FILE__)."in\143".DIRECTORY_SEPARATOR."tinymce-plugin.php"); } if ( isset ($O4["\155isc_plugin_l\141\156\147uage"]) && ($O4["\155isc_plugin_l\141\156\147uage"] != "automatic")) { add_filter("plugin_lo\143\141\154e",array( &$this,"\154mm_set_plugin_\154\157\143ale"),"lmm"); } add_action("widgets_init",create_function("","retur\156\040\162egister_widg\145\164\050\042Cla\163\163\137leaflet_rec\145\156\164_marker_w\151\144\147et\042)\073")); if ( isset ($O4["misc_admin_dashbo\141\162\144_widget"]) && ($O4["misc_a\144\155\151n_dashboard_w\151\144\147et"] == "enabled")) { if (!is_multisite()) { add_action("wp_dashboard\137\163\145tup",array( &$this,"lmm_re\147\151\163ter_widgets")); } else { add_action("wp_netw\157\162\153_dashboard_se\164\165\160",array( &$this,"lmm_\162\145\147ister_widgets")); add_action("\167\160_dashboard_\163\145\164up",array( &$this,"lmm_register\137\167\151dgets")); } } if (( isset ($O4["misc_pointers"])) && ($O4["\155isc_pointers"] == "enabled")) { $version_before_update=get_option("leafletmapsmarker_\166\145\162sion_pro_bef\157\162\145_update"); if ($version_before_update != "0") { add_action("admin_e\156\161\165eue_scripts",array($this,"\154mm_update_pointe\162\137\141dmin_scripts"),01751); } } add_action("adm\151\156\137enqueue_scrip\164\163",array($this,"lmm_feature_pointe\162\137\141dmin_scripts"),01752); if (is_multisite()) { add_action("\144elete_blog",array( &$this,"lmm_delete_mul\164\151\163ite_blog")); } add_action("\164\145mplate_include",array( &$this,"\154mm_template_ch\145\143\153_shortcode")); add_action("\160\154\165gin_row_meta",array( &$this,"lmm_plugin\163\137\160age_add_links"),012,2); add_filter("\165pload_mimes",array( &$this,"\154mm_permit_mi\155\145\137types_on_upl\157\141\144")); add_filter("post\137\155\151me_types",array( &$this,"lmm_modify\137\160\157st_mime_types")); } function lmm_register_activation_hook() { global $wp_version; if (version_compare($wp_version,"\063\0563","<")) { exit ("\133\115aps Marker Pro -\040\151\156stallation \146\141\151led!]: Wor\144\120\162ess Versio\156\040\063.3 or h\151\147\150er is n\145\145\144ed for \164\150\151s plug\151\156\040(you ar\145\040\165sing v\145\162\163ion ".$wp_version."\051\040\055 please upgr\141\144\145 your WordPr\145\163\163 installa\164\151\157n!"); } if (version_compare(phpversion(),"5.2","<")) { exit ("\133\115\141ps Marker Pro \055\040\151nstallatio\156\040\146ailed]: P\110\120\0405.2 is ne\145\144\145d for thi\163\040plugin (you\040\141re using P\110\120\040".phpversion()."; no\164\145\072 support for \120\110\120 4 has been\040\157\146ficially d\151\163\143ontinued s\151\156\143e 2007-1\062\055\0631!) - \160\154\145ase upg\162\141\144e your P\110\120\040install\141\164\151on!"); } } function lmm_modify_post_mime_types($post_mime_types) { $post_mime_types["\164\145xt/gpx"]=array(__("\107\120\130 track","\154\155\155"),__("Manage G\120\130\040tracks","\154\155\155"),_n_noop("GPX track <spa\156\040\143lass=\042\143\157\165nt\042>(\045\163\051</span>","GP\130\040\164racks <span cla\163\163\075\042count\042\076\050%s)</spa\156\076","lmm")); return $post_mime_types; } function lmm_permit_mime_types_on_upload($existing_mimes=array()) { $existing_mimes["\147px"]="\164\145\170t/gpx"; return $existing_mimes; } function lmm_plugins_page_add_links($links,$file) { $plugin="\154\145aflet-maps-ma\162\153\145r-pro/leaflet\055\155aps-marker.ph\160"; $l5=get_option("\154\145\141fletmapsmarke\162\137\166ersion_pro"); if ($file == $plugin) { $O5="<a st\171\154\145=\042t\145\170\164-decoration:n\157\156\145;\042 t\151\164\154e=\042".esc_attr__("Ma\160\163\115arker affili\141\164\145 program - \163\151\147n up now an\144\040\162eceive c\157\155\155issions\040\165p to 50%!","lmm")."\042 href\075\042\150ttps://www.m\141\160\163marker.com/a\146\146\151liates\042\040\164arget=\042_\142\154\141nk\042>\074\151mg src=\042".O1."inc/img/icon-affil\151\141\164es.png\042\040\167\151dth=\042\061\066\042 height\075\042\0616\042\040\141\154t=\042a\146\146\151liates\042\076</a>"; $l6="<a style=\042\164\145xt-decoration:\156\157\156e;\042 titl\145\075\042".esc_attr__("\115\141\160sMarker reselle\162\040\160rogram - re\055\163\145ll with a\040\0620% discount!","\154\155m")."\042 href=\042\150\164\164ps://www.maps\155\141\162ker.com/res\145\154\154er\042 ta\162\147\145t=\042_b\154\141\156k\042><\151\155\147 src=\042".O1."\151\156c/img/icon-resell\145\162\163.png\042 \167\151\144th=\0421\066\042\040height=\042\061\066\042 a\154\164\075\042re\163\145\154lers\042\076\074/a>"; $O6="<a style=\042\164\145xt-decoratio\156\072\156one;\042 h\162\145\146=\042http\163\072\057/www.map\163\155\141rker.co\155\057\162eviews\042\040\164arget=\042\137\142lank\042\040\164itle=\042".esc_attr__("\160lease rate this \160\154\165gin on word\160\162\145ss.org","lmm")."\042><img src=\042".O1."\151\156c/img/icon-star\056\160\156g\042 wid\164\150\075\04216\042\040\150eight=\042\061\066\042 alt=\042\162\141tings\042\076\074/a>"; $l7="\074a href=\042h\164\164\160s://translate.\155\141\160smarker.com/\160\162\157jects/lmm\042\040\164arget=\042\137\142lank\042 \164\151\164le=\042".esc_attr__("\164ranslations","\154\155\155")."\042><img src=\042".O1."\151\156c/img/icon-tran\163\154\141tions.png\042\040\167idth=\0421\066\042\040height=\042\061\066\042 alt\075\042translation\163\042\076</a>"; $O7="<a href=\042\150\164\164p://faceboo\153\056\143om/mapsmar\153\145\162\042 tar\147\145\164=\042_bl\141\156\153\042 ti\164\154\145=\042".esc_attr__("F\157\154\154ow MapsMarker o\156\040\106acebook","\154mm")."\042\076<img src=\042".O1."\151\156\143/img/icon-fac\145\142\157ok.png\042\040\167\151dth=\042\061\066\042 height=\042\061\066\042 \141\154\164=\042fa\143\145\142ook\042\076\074/a>"; $l8="<a hre\146\075\042http://twitt\145\162\056com/mapsm\141\162\153er\042 ta\162\147\145t=\042_\142\154\141nk\042 t\151\164\154e=\042".esc_attr__("\106\157llow @MapsMarker\040\157\156 Twitter","lmm")."\042><img src=\042".O1."\151\156\143/img/icon-twitte\162\056\160ng\042 wi\144\164\150=\04216\042\040\150eight=\042\061\066\042 alt=\042\164\167itter\042\076\074/a>"; $O8="\074a href=\042\150\164\164ps://www.map\163\155\141rker.com/+\042\040\164arget=\042\137\142lank\042 ti\164\154\145=\042".esc_attr__("\106\157llow MapsM\141\162ker on Google+","lmm")."\042\076\074img src=\042".O1."\151\156\143/img/icon-g\157\157\147le-plus.\160\156\147\042 wid\164\150\075\04216\042\040\150eight=\042\061\066\042 alt\075\042google+\042\076\074/a>"; $l9="\074a href=\042\150\164\164p://feeds.\146\145\145dburner.com/\115\141\160sMarker\042\040\164arget=\042\137\142lank\042\040\164itle=\042\122\123S\042><i\155\147\040src=\042".O1."\151nc/img/icon-rss\056\160\156g\042 w\151\144\164h=\04216\042\040\150eight=\042\061\066\042 alt\075\042\162ss\042\076\074/a>"; $O9="\074\141 href=\042htt\160\072\057/feedburne\162\056\147oogle.com\057\146\142/a/mailve\162\151\146y?uri=Ma\160\163\115arker\042\040\164arget=\042\137\142lank\042\040\164itle=\042\122\123\123 (via E\155\141\151l)\042\076\074img src=\042".O1."\151\156c/img/icon-rss\055\145\155ail.png\042\040\167idth=\0421\066\042\040height=\042\061\066\042 al\164\075\042rss-ema\151\154\042></a>"; if ((la($Oa=FALSE,$lb=TRUE) === TRUE) && (la() === FALSE)) { $Ob="\074br/></td></t\162\076\074tr><td col\163\160\141n=\0423\042\040\163tyle=\042\142\157rder-bottom\072\061px solid \043\143cc;padding\072\060;\042><d\151\166\040style=\042\160\141dding: \063\160x 5px;backg\162\157\165nd-colo\162\072 #FFEBE8;\142\157\162der: \061\160x so\154\151\144 #CC000\060\073color: #3\063\063;\042><st\162\157\156g>".__("Warning: yo\165\162\040access to \165\160\144ates and supp\157\162\164 for Lea\146\154\145t Maps Ma\162\153\145r Pro ha\163\040expired!","lmm")."</strong><br/\076"; $lc=get_option("\154\145afletmapsmarker\137\166\145rsion_pro_la\164\145\163t"); if (($lc != NULL) && ($lc>$l5)) { $Ob.=__("\114atest available v\145\162\163ion:","lmm")." <\141\040\150ref='https://\167\167\167.mapsmarke\162\056com/v".$lc."\160\047\040target='_bla\156\153\047 title='".esc_attr__("\143\154ick to show r\145\154\145ase notes","\154mm")."\047>".$lc."\074/a> "."(<a hr\145\146\075'www.mapsmark\145\162\056com/changelo\147\057\160ro/' targ\145\164\075'_blank'\076".__("show all av\141\151\154able changelo\147\163","l\155\155")."\074\057a>)<br/>"; } $Ob.=sprintf(__("\131ou can conti\156\165\145 using versi\157\156\040%s witho\165\164\040any limit\141\164\151ons. Neve\162\164\150eless y\157\165\040will \156\157\164 be abl\145\040to get upd\141\164\145s includ\151\156\147 bugfix\145\163\054 new f\145\141\164ures an\144\040optimizati\157\156\163 as wel\154\040as access \164\157\040our s\165\160\160ort sy\163\164\145m. ","\154mm"),$l5)."\074br/>".sprintf(__("\074a href=\042%\163\042\076Please rene\167\040\171our access \164\157\040updates \141\156\144 support t\157\040\153eep you\162\040\160lugin u\160\055to-date and\040\163\141fe</a>.","\154mm"),l1."\141\144\155in.php?page=lea\146\154\145tmapsmarker\137\154\151cense")."\074/div>"; } else { $Ob=""; } $links[]=$O5."\046nbsp;".$l6."&nbsp;".$O6."&nbsp;".$l7."&nbsp;".$O7."\046\156bsp;".$l8."&nbsp;".$O8."\046\156bsp;".$l9."\046\156bsp;".$O9.$Ob; } return $links; } function lmm_delete_multisite_blog($blog_id) { switch_to_blog($blog_id); $GLOBALS["\167pdb"]->query("\104\122OP TABLE `".$GLOBALS["wpdb"]->prefix."leafletmapsma\162\153\145r_layers`"); $GLOBALS["\167pdb"]->query("\104ROP TABLE `".$GLOBALS["\167pdb"]->prefix."leafletmaps\155\141\162ker_markers`"); $O0=wp_upload_dir(); $icons_directory=$O0["b\141\163\145dir"].DIRECTORY_SEPARATOR."\154\145aflet-maps-mark\145\162\055icons".DIRECTORY_SEPARATOR; if (is_dir($icons_directory)) { foreach (glob($icons_directory."\052\056*") as $v) { unlink($v); } rmdir($icons_directory); } } function lmm_update_pointer_admin_scripts() { $dismissed_pointers=explode(",",( string) get_user_meta(get_current_user_id(),"\144ismissed_wp_point\145\162\163",TRUE)); $dismissed_pointers=array_flip($dismissed_pointers); $Oc=FALSE; $lmm_version_new=get_option("leafletmapsm\141\162\153er_version_p\162\157"); $ld="\154\155mvp".str_replace("\056","",$lmm_version_new); if (! isset ($dismissed_pointers[$ld])) { $Oc=TRUE; add_action("\141dmin_print_\146\157\157ter_scripts",array($this,"lmm_update_pointer\137\146\157oter_script")); } if ($Oc) { wp_enqueue_script("wp\055\160\157inter"); wp_enqueue_style("wp-pointer"); } } function lmm_update_pointer_footer_script() { $lmm_version_new=get_option("\154eafletmapsma\162\153\145r_version_pro"); $ld="l\155\155\166p".str_replace(".","",$lmm_version_new); $Od="<h3>".sprintf(esc_attr__("Maps M\141\162\153er Pro plugin \165\160\144ate to v%1s w\141\163\040successfu\154","\154\155m"),$lmm_version_new)."</h3>"; $changelog_url="\074\141\040href=\042".l1."\141\144min.php?page=\154eafletmaps\155\141\162ker_markers"."\042\040\163\164yle=\042\164\145\170t-decoratio\156\072\156one;\042\076".__("\143\150\141ngelog","\154\155\155")."\074/a>"; $blogpost_url="\074a href=\042h\164\164\160s://www.maps\155\141\162ker.com/v".$lmm_version_new."p\042 \164\141\162get=\042_bl\141\156\153\042 styl\145\075\042text-dec\157\162\141tion:none\073\042\076mapsma\162\153\145r.com</\141\076"; $Od.="<p>".sprintf(esc_attr__("Pl\145\141\163e see the %1s f\157\162\040new feature\163\040\157r the blo\147\040\160ost on %2\163\040\146or more\040\144\145tails","\154mm"),$changelog_url,$blogpost_url)."</p>"; ?><?php echo "\015\012\011\011\074\163cript type=\042\164\145xt/javascri\160\164\042>// <![CD\101\124\101[\015\012\011\011jQuery(doc\165\155\145nt).rea\144\171\050functio\156\050\044) \173\015\012\011\011\011\151\146(typeo\146\050\152Query()\056\160ointer) !\075\040\047undef\151\156\145d') \173\015\012\011\011\011\011\044(\047\043toplevel_\160\141\147e_leaf\154\145\164mapsm\141\162\153er_mar\153\145rs').poin\164\145r(\173\015\012\011\011\011\011\011conten\164\072 '"; ?><?php echo $Od; ?><?php echo "\047,\015\012\011\011\011\011\011\160\157\163ition: \173\015\012\011\011\011\011\011\011edg\145\072\040'left',\015\012\011\011\011\011\011\011ali\147\156\072 'cente\162\047\015\012\011\011\011\011\011\175\054\015\012\011\011\011\011\011\143\154ose: f\165\156\143tion()\040\173\015\012\011\011\011\011\011\011\044.post( \141\152\141xurl, \173\015\012\011\011\011\011\011\011\011pointer: \047"; ?><?php echo $ld; ?><?php echo "',\015\012\011\011\011\011\011\011\011action: 'dis\155\151\163s-wp-point\145\162\047\015\012\011\011\011\011\011\011\175);\015\012\011\011\011\011\011\175\015\012\011\011\011\011}\051\056pointer('o\160\145\156');\015\012\011\011\011\175\015\012\011\011\175\051;\015\012\011\011// ]]>\074\057script>\015\012\011\011"; ?><?php } function lmm_feature_pointer_admin_scripts() { $dismissed_pointers=explode(",",( string) get_user_meta(get_current_user_id(),"\144\151\163missed_wp_p\157\151\156ters",TRUE)); $dismissed_pointers=array_flip($dismissed_pointers); $Oc=FALSE; if (! isset ($dismissed_pointers["\154\155\155esw"])) { $Oc=TRUE; add_action("admin_print_f\157\157\164er_scripts",array($this,"lmm_feat\165\162\145_pointer_foot\145\162\137script")); } if ($Oc) { wp_enqueue_script("wp\055\160\157inter"); wp_enqueue_style("wp-pointer"); } } function lmm_feature_pointer_footer_script() { include ("\151\156\143".DIRECTORY_SEPARATOR."\146\145ature-pointer\163\056\160hp"); } function lmm_register_widgets() { $O4=get_option("\154eafletmapsmark\145\162\137options"); if ($O4["\155isc_whitel\141\142\145l_backend"] == "enabl\145\144") { $le=__("Map\163\040\055 recent marke\162\163","lmm"); } else { $le=__("\115\141ps Marker Pro\040\055 recent markers","lmm"); } wp_add_dashboard_widget("lmm-\141\144\155in-dashboard-\167\151\144get",$le,array( &$this,"lmm_\144\141\163hboard_widget"),array( &$this,"\154mm_dashboard_w\151\144\147et_control")); } function lmm_dashboard_widget() { global $wpdb; $O4=get_option("leafletm\141\160\163marker_option\163"); if ($O4["defau\154\164\163_marker_custom\137\151\143on_url_dir"] == "\156\157") { $defaults_marker_icon_dir=l3; $defaults_marker_icon_url=O2; } else { $defaults_marker_icon_dir=htmlspecialchars($O4["defaul\164\163\137marker_icon_d\151\162"]); $defaults_marker_icon_url=htmlspecialchars($O4["\144efaults_marker_i\143\157\156_url"]); } $table_name_markers=$wpdb->prefix."leafletma\160\163\155arker_markers"; $widgets=get_option("dashboard_\167\151\144get_options"); $widget_id="\154\155m-admin-dashboar\144\055\167idget"; $number_of_markers= isset ($widgets[$widget_id]) && isset ($widgets[$widget_id]["\151tems"]) ? absint($widgets[$widget_id]["\151tems"]): 4; if ((la($Oa=FALSE,$lb=TRUE) === TRUE) && (la() === FALSE)) { $l5=get_option("\154eafletmapsmark\145\162\137version_pro"); echo "\074\144iv style=\042\160\141\144ding: 3px \065\160\170;background\055\143\157lor: #FFE\102\105\070;border:\040\061\160x solid\040\043CC0000;bo\162\144\145r-radius\072\0403px;color\072\040#333;\042\076\074strong>".__("Warnin\147\072\040your access t\157\040\165pdates and s\165\160\160ort for Lea\146\154\145t Maps Ma\162\153\145r Pro has\040\145\170pired!","lmm")."</strong><br/>"; $lc=get_option("\154\145\141fletmapsmarke\162\137\166ersion_pro_l\141\164\145st"); if (($lc != NULL) && ($lc>$l5)) { echo __("\114\141\164est available\040\166\145rsion:","lmm")."\040<a href='https:/\057\167\167w.mapsmarker\056\143\157m/v".$lc."\160' target='_blan\153\047\040title='".esc_attr__("click to show\040\162\145lease note\163","lmm")."\047>".$lc."\074/a> "."(<a href='ww\167\056\155apsmarker.co\155\057\143hangelog/pr\157\057\047 target='\137\142\154ank'>".__("\163\150ow all avail\141\142\154e changelogs","lmm")."\074/a>)<br/>"; } echo sprintf(__("\131\157\165 can continue \165\163\151ng version %\163\040\167ithout any\040\154\151mitation\163\056\040Neverth\145\154\145ss you \167\151\154l not b\145\040able to get\040\165\160dates i\156\143\154uding b\165\147\146ixes, n\145\167\040featur\145\163\040and opt\151\155\151zation\163\040\141s well\040\141s access t\157\040our suppo\162\164\040system\056\040","\154\155m"),$l5)."<br/>".sprintf(__("<a href=\042\045\163\042>Pleas\145\040\162enew your a\143\143\145ss to upda\164\145\163 and suppo\162\164\040to keep y\157\165r plugin u\160\055to-date an\144\040\163afe</a>\056","lmm"),l1."\141dmin.php?page\075\154\145afletmapsmark\145\162\137license")."\074/div>"; echo "\074\150r style=\042\142\157rder:0;height:1p\170\073\142ackground-\143\157\154or:#d8d8d8\073\042\057>"; } $Oe=$wpdb->get_results($wpdb->prepare( "SELECT `id`,`ma\162\153\145rname`,`icon`\054\140\143reatedon`,\140\143\162eatedby` F\122\117\115 `$table_name_markers`\040\117\122DER BY `creat\145\144\157n` desc LIMI\124\040\045d" ,$number_of_markers),ARRAY_A); if ($Oe != NULL) { echo "\074table style=\042\155\141rgin-bottom:\065\160\170;\042><t\162\076"; foreach ($Oe as $row) { $icon=($row["\151con"] == NULL) ? O1."\154eaflet-dist/ima\147\145\163/marker.png": $defaults_marker_icon_url."/".$row["\151\143on"]; echo "<td><a href=\042".l1."\141dmin.php?page=\154\145\141fletmapsmark\145\162\137marker&id=".$row["id"]."\042 title=\042".esc_attr__("edit marker","lmm")."\042><img src=\042".$icon."\042\040\163tyle=\042wi\144\164\150:80%;\042>\074\057a>"; echo "<td style=\042\166\145rtical-align:t\157\160\073line-heigh\164\072\061.2em;\042\076"; echo "\074\141 href=\042".l1."\141\144\155in.php?page=lea\146\154\145tmapsmarker_\155\141\162ker&id=".$row["id"]."\042 title=\042".esc_attr__("\145\144it marker","\154\155m")."\042>".htmlspecialchars(stripslashes($row["\155arkername"]))."\074\057\141><br/>".__("\143\162eated on","\154\155\155")."\040".date("Y-m-\144\040\055 h:m",strtotime($row["createdon"])).", ".__("\143\162eated by","\154\155\155")."\040".$row["c\162\145\141tedby"]; echo "</td\076\074\057tr>"; } echo "\074\057\164able>"; } else { echo "<p style=\042\155\141rgin-bottom:5px\073\042\076".__("\116o marker cre\141\164\145d yet","\154\155m")."\074/p>"; } if (! isset ($widgets[$widget_id]["bl\157\147\160osts"])) { $lf=1; } else if ( isset ($widgets[$widget_id]["\142\154ogposts"]) && ($widgets[$widget_id]["blogposts"] == 1)) { $lf=0; } else { $lf=1; } if (($lf == 1) && ($O4["misc_wh\151\164\145label_backen\144"] == "\144\151\163abled")) { require_once (ABSPATH.WPINC.DIRECTORY_SEPARATOR."class\055\163\151mplepie.php"); $Of=new simplepie(); if (file_exists($defaults_marker_icon_dir.DIRECTORY_SEPARATOR."r\145\141\144me-icons.txt")) { $Of->enable_cache(TRUE); $Of->set_cache_location($location=$defaults_marker_icon_dir); $Of->set_cache_duration(0250600); } else { $Of->enable_cache(FALSE); } $Of->set_feed_url("\150\164\164p://feeds.fee\144\142\165rner.com/Ma\160\163\115arkerPro"); $Of->set_stupidly_fast(TRUE); $Of->enable_order_by_date(TRUE); $Of->init(); $Of->handle_content_type(); echo "\074\150\162 style=\042\142\157rder:0;height:\061\160\170;backgrou\156\144\055color:#d\070\144\070d8;\042\057\076<strong><p\076".__("\114atest blog pos\164\163\040from www.m\141\160\163marker.com","lmm")."</p></strong>"; if ($Of->get_items() == NULL) { $blogpost_url="<a hr\145\146\075\042http\163\072\057/www.maps\155\141\162ker.com/ne\167\163\042 target=\042\137\142lank\042\076\150ttps://ww\167\056\155apsmark\145\162\056com/ne\167\163\074/a>"; echo sprintf(__("Feed coul\144\040\156ot be retri\145\166\145d, please t\162\171\040again lat\145\162\040or read \164\150\145 latest\040\142\154og post\163\040\141t %s","lmm"),$blogpost_url); } foreach ($Of->get_items(0,3) as $item) { echo "\074\160  style=\042\155\141\162gin:0.5em 0;\042\076".$item->get_date("\152 F Y").": <strong><a href=\042".$item->get_permalink()."?ref\075\144\141shboard\042>".$item->get_title()."</a></strong></p>".PHP_EOL; } echo "\074p><a style=\042\164\145xt-decoratio\156\072\156one;\042\040\150\162ef=\042h\164\164\160s://www.m\141\160\163marker.\143\157\155\042 t\141\162\147et=\042\137\142lank\042>\074\151\155g src=\042".O1."inc/img/icon-websit\145\055\150ome.png\042\040\167idth=\04216\042\040\150eight=\042\061\066\042 alt=\042\155\141psmarker\056\143om\042> Ma\160\163\115arker.c\157\155\074/a>&nbs\160\073\074a styl\145\075\042text-d\145\143\157ration\072\156\157ne;\042\040\164itle=\042".esc_attr__("MapsMarker affil\151\141\164e program -\040\163\151gn up now \141\156\144 receive c\157\155\155issions u\160\040\164o 50%!","lmm")."\042\040\150\162ef=\042h\164\164\160s://www.mapsma\162\153\145r.com/affi\154\151\141tes\042 \164\141\162get=\042\137\142\154ank\042\076\074img src=\042".O1."inc/img/icon-affi\154\151\141tes.png\042\040\167\151dth=\042\061\066\042 heigh\164\075\04216\042\040\141\154t=\042a\146\146\151liates\042\076\040".__("\101\146\146iliates","\154mm")."</a>&nbsp;<a s\164\171\154e=\042text\055\144\145coration:n\157\156\145;\042 ti\164\154\145=\042".esc_attr__("MapsMarker\040\162\145seller prog\162\141\155 - re-sell \167\151\164h a 20% di\163\143\157unt!","\154\155m")."\042 href=\042\150\164tps://www.map\163\155\141rker.com/res\145\154\154er\042 t\141\162\147et=\042_\142\154\141nk\042><\151\155g src=\042".O1."\151\156\143/img/icon-rese\154\154\145rs.png\042\040\167\151dth=\0421\066\042\040height=\042\061\066\042 a\154\164\075\042re\163\145\154lers\042\076\040".__("Resellers","\154\155\155")."</a>&nbsp;<a styl\145\075\042text-decora\164\151\157n:none;\042\040\150ref=\042htt\160\163\072//www.ma\160\163\155arker.com\057\162eviews\042\040\164arget=\042\137\142\154ank\042\040\164itle=\042".esc_attr__("please \162\141\164e this plugin o\156\040\167ordpress.or\147","\154\155\155")."\042><img src\075\042".O1."\151nc/img/ic\157\156\055star.png\042\040\167idth=\0421\066\042\040height=\042\061\066\042 al\164\075\042ratings\042\076\040".__("rate plu\147\151\156","\154\155\155")."</a>&nbsp;<a hre\146\075\042https://tr\141\156\163late.mapsma\162\153\145r.com/proj\145\143\164s/lmm\042\040\164arget=\042\137\142\154ank\042\076\074img src=\042".O1."inc/img/icon-t\162\141\156slations.png\042\040\167idth=\042\061\066\042 height\075\042\0616\042 \141\154\164=\042tra\156\163\154ations\042\076\040".__("tra\156\163\154ations","\154\155\155")."</a>&nbsp;<a href=\042\150\164tp://twitte\162\056\143om/mapsmark\145\162\042 target=\042\137\142lank\042\076\074img src=\042".O1."inc/i\155\147\057icon-twitter.p\156\147\042 width=\042\061\066\042 height\075\042\0616\042 \141\154\164=\042twi\164\164\145r\042>\040\124\167itter<\057\141\076&nbsp;<\141\040href=\042\150\164\164p://face\142\157\157k.com/m\141\160\163marker\042\040\164arget=\042\137\142lank\042\076\074img src\075\042".O1."inc/img/icon-fa\143\145\142ook.png\042\040\167\151dth=\042\061\066\042 height\075\042\0616\042 \141\154\164=\042fa\143\145\142ook\042\076\040Facebook</\141\076\046nbsp;<\141\040\150ref=\042\150\164tps://www\056\155\141psmarke\162\056\143om/+\042\040\164arget=\042\137\142lank\042\076\074img src=\042".O1."inc/img/i\143\157\156-google-plus.pn\147\042\040width=\042\061\066\042 height\075\042\0616\042 a\154\164\075\042go\157\147\154e+\042>\040\107\157ogle+</\141\076&nbsp;<a st\171\154\145=\042te\170\164\055decora\164\151\157n:none\073\042 href=\042\150\164tps://ww\167\056\155apsmar\153\145\162.com/c\150\141ngelog\042\040\164arget=\042\137\142lank\042\076\074img src\075\042".O1."\151\156c/img/icon-chang\145\154\157g-header.pn\147\042\040width=\042\061\066\042 heigh\164\075\04216\042 \141\154\164=\042c\150\141\156gelog\042\076\040".__("Changelog","\154\155m")."\074/a>&nbsp;<a \150\162\145f=\042http\072\057/feeds.feedbur\156\145\162.com/MapsM\141\162\153er\042 \164\141\162get=\042\137\142lank\042>\074\151\155g src=\042".O1."\151\156c/img/icon-rs\163\056\160ng\042 wi\144\164\150=\04216\042\040\150eight=\042\061\066\042 alt=\042\162\163s\042> RSS\074\057a>&nbsp;<a\040\150\162ef=\042\150\164\164p://fee\144\142\165rner.go\157\147\154e.com/f\142\057\141/mailve\162\151\146y?uri=M\141\160\163Marker\042\040target=\042\137\142lank\042\076\074img src=\042".O1."\151\156c/img/icon-rss-e\155\141\151l.png\042\040\167\151dth=\042\061\066\042 height=\042\061\066\042 a\154\164\075\042rss\055\145mail\042>\040".__("\105\055Mail","lmm")."\074/a></p>"; } } function lmm_dashboard_widget_control() { $O4=get_option("leafletmapsma\162\153\145r_options"); $widget_id="lmm\055\141\144min-dashboard-\167\151\144get"; $form_id="\154mm-admin-da\163\150\142oard-widget-co\156\164\162ol"; $update=FALSE; if (!$widget_options=get_option("dashbo\141\162\144_widget_option\163")) $widget_options=array(); if (! isset ($widget_options[$widget_id])) { $widget_options[$widget_id]=array("blogposts" => 0,"it\145\155\163" => 5); $update=TRUE; } if ("\120\117ST" == $_SERVER["\122EQUEST_METHOD"] && isset ($_POST[$form_id])) { $number=($_POST[$form_id]["items"] == NULL) ? "\063": absint($_POST[$form_id]["items"]); $lg= isset ($_POST[$form_id]["\142\154ogposts"]) ? "\061": "\060"; $widget_options[$widget_id]["\151tems"]=$number; $widget_options[$widget_id]["\142logposts"]=$lg; $update=TRUE; } if ($update) update_option("dashboa\162\144\137widget_options",$widget_options); $number= isset ($widget_options[$widget_id]["\151\164ems"]) ? ( integer) $widget_options[$widget_id]["\151tems"]: ""; echo "<p><label\040\146\157r=\042lmm\055\141\144min-dashboa\162\144\055widget-num\142\145\162\042>".__("\116\165mber of markers to\040\163\150ow:")."\040\074/label>"; echo "\074input id=\042\154\155m-admin-dashbo\141\162\144-widget-num\142\145\162\042 nam\145\075\042".$form_id."[items]\042\040\164ype=\042te\170\164\042 value=\042".$number."\042 size=\042\062\042 /></p>"; if ($O4["\155isc_whitelabel\137\142\141ckend"] == "disabled") { echo "\074\160><label for=\042\154\155m-admin-dashb\157\141\162d-widget-b\154\157\147posts\042\076".__("Hide bl\157\147\040posts and li\156\153\040section:")."\040\074/label>"; echo "<input id=\042\154\155m-admin-dashboa\162\144\055widget-blo\147\160\157sts\042 \156\141\155e=\042".$form_id."\133\142\154ogposts]\042\040\164\171pe=\042c\150\145\143kbox\042 ".checked($widget_options[$widget_id]["blo\147\160\157sts"],1,FALSE)."/></p>"; } } function lmm_load_translation_files() { load_plugin_textdomain("\154\155m",FALSE,dirname(plugin_basename( __FILE__))."\057\154anguages/"); } function lmm_set_plugin_locale($lang) { $O4=get_option("\154eafletmapsmar\153\145\162_options"); global $locale; if ($O4["misc_plugin_lang\165\141\147e_area"] == "backend") { return is_admin() ? $O4["misc_plug\151\156\137language"]: $locale; } else if ($O4["\155isc_plugin_lan\147\165\141ge_area"] == "frontend") { return is_admin() ? $locale: $O4["\155isc_plugin_l\141\156\147uage"]; } else if ($O4["\155isc_plugin_langua\147\145\137area"] == "both") { return $O4["\155\151sc_plugin_langua\147\145"]; } else { return $locale; } } function lmm_compatibility_checks() { include ("inc".DIRECTORY_SEPARATOR."co\155\160\141tibility-che\143\153\163.php"); } function lmm_help() { include ("\154eaflet-help-c\162\145\144its.php"); } function lmm_settings() { global $Og; $Og->display_page(); } function lmm_list_layers() { include ("\154\145\141flet-list-la\171\145\162s.php"); } function lmm_list_markers() { include ("leaflet-list-mar\153\145\162s.php"); } function lmm_layer() { include ("\154eaflet-layer\056\160\150p"); } function lmm_marker() { include ("\154\145aflet-marker.ph\160"); } function lmm_import_export() { include ("\154\145aflet-import-exp\157\162\164.php"); } function lmm_tools() { include ("leaflet-tools.php"); } function lmm_add_georss_to_head() { $georss_to_head="<link\040\162\145l=\042alt\145\162\156ate\042\040\164\171pe=\042a\160\160\154ication/rs\163\053\170ml\042 \164\151\164le=\042".get_bloginfo("name")."\040GeoRSS-Feed\042\040\150ref=\042".O1."leaflet-georss.p\150\160\077layer=all\042\040\057>".PHP_EOL; echo $georss_to_head; } function lmm_showmap($atts) { require ("\151nc".DIRECTORY_SEPARATOR."showmap_p\162\145\160are.php"); return $lh; } function lmm_load_settings_class() { if (is_admin()) { require_once (plugin_dir_path( __FILE__)."\151\156c".DIRECTORY_SEPARATOR."class-le\141\146\154et-options.p\150\160"); global $Og; $Og=new class_leaflet_options(); } } function lmm_admin_menu() { global $wp_version; if (version_compare($wp_version,"3.8-alpha","\076")) { $Oh="-white"; } else { $Oh=""; } $O4=get_option("lea\146\154\145tmapsmarker_o\160\164\151ons"); if (!empty($O4)) { $capabilities=$O4["c\141\160\141bilities_edit"]; } else { $capabilities="edit_posts"; $Oi="a\143\164\151vate_plugins"; } if (!empty($O4)) { if ($O4["\155isc_whitelabe\154\137\142ackend"] == "enabled") { $lj=esc_attr__("\115aps","lmm"); $Oi="\141\143tivate_plugins"; } else { $lj="\074\163pan style=\042\146\157\156t-size:92%\073\042\076Maps Mark\145\162\040Pro</span\076"; $Oi=$O4["\143apabilities_\145\144\151t"]; } } else { $lj=esc_attr__("\115aps","l\155\155"); $Oi="acti\166\141\164e_plugins"; } $page=add_object_page($lj,$lj,$capabilities,"\154\145\141fletmapsmarke\162\137\155arkers",array( &$this,"\154\155m_list_markers"),O1."\151\156c/img/icon-men\165\055\160age".$Oh."\056\160\156g"); if (!empty($O4)) { $page2=add_submenu_page("leafletmapsmarke\162\137\155arkers",$lj." - ".__("List all\040\155\141rkers","\154\155\155"),"\074\151mg src=\042".O1."\151\156c/img/icon-men\165\055\154ist".$Oh."\056\160ng\042> ".__("\114\151\163t all markers","\154\155m"),$O4["\143\141pabilities_edit"],"leafl\145\164\155apsmarker_marke\162\163",array( &$this,"lmm_list_mark\145\162\163")); $page3=add_submenu_page("leaflet\155\141\160smarker_marker\163",$lj." - ".__("add/edit marker","\154\155\155"),"\074\151\155g src=\042".O1."\151\156\143/img/icon-menu-a\144\144".$Oh."\056png\042> ".__("Ad\144\040\156ew marker","\154\155m"),$O4["\143apabilities_edi\164"],"\154\145\141fletmapsmark\145\162\137marker",array( &$this,"lmm_m\141\162\153er")); $page3b=add_submenu_page("\154\145\141fletmapsmarke\162\137\155arkers",$lj." - ".__("\111\155port/Export","\154\155m"),"<\151\155\147 src=\042".O1."\151\156\143/img/icon-menu\055\151\155port-expor\164".$Oh.".png\042> ".__("Import/Export","\154\155\155"),$O4["capabilitie\163\137\145dit"],"le\141\146\154etmapsmarker_imp\157\162\164_export",array( &$this,"lmm_impor\164\137\145xport")); $page4=add_submenu_page("leafletmap\163\155\141rker_markers",$lj." \055\040".__("\114\151\163t all layers","\154\155m"),"<img\040\163\162c=\042".O1."inc/i\155\147\057icon-menu-list".$Oh."\056\160\156g\042> ".__("List all \154\141\171ers","l\155\155"),$O4["\143apabilities_edi\164"],"\154\145afletmapsmarke\162\137\154ayers",array( &$this,"lmm_list_layers")); $page5=add_submenu_page("\154eafletmapsmarker\137\155\141rkers",$lj." - ".__("\141dd/edit layer","\154mm"),"<img sr\143\075\042".O1."inc/img/icon-men\165\055\141dd".$Oh.".png\042\076\040".__("Add new layer","\154\155\155"),$O4["\143\141\160abilities_edi\164"],"leafletmapsmar\153\145\162_layer",array( &$this,"lmm_layer")); } else { $page=""; $page2=""; $page3=""; $page3b=""; $page4=""; $page5=""; } $page6=add_submenu_page("\154\145\141fletmapsmar\153\145\162_markers",$lj." - ".__("Tools","lmm"),"\074\150r noshade size=\042\061\042/><img src=\042".O1."inc/\151\155\147/icon-menu-too\154\163".$Oh.".png\042> ".__("Tools","\154mm"),$Oi,"\154\145\141fletmapsmark\145\162\137tools",array( &$this,"\154\155\155_tools")); $page7=add_submenu_page("\154\145afletmapsma\162\153\145r_markers",$lj." - ".__("Settings","lmm"),"<img sr\143\075\042".O1."in\143\057\151mg/icon-menu-s\145\164\164ings".$Oh.".pn\147\042\076 ".__("\123ettings","lmm"),$Oi,"\154\145afletmapsmarker\137\163\145ttings",array( &$this,"l\155\155\137settings")); $page11=add_submenu_page("\154\145\141fletmapsmarker_\155\141\162kers",$lj."\040\055 Maps Mark\145\162\040API","\074img src=\042".O1."\151nc/img/icon-menu-\141\160\151".$Oh.".png\042\076\040Maps Marker API",$Oi,"admin.p\150\160\077page=leaflet\155\141\160smarker_sett\151\156\147s#lmm-misc-\163\145\143tion9"); if (!empty($O4)) { $page8=add_submenu_page("leafletmapsm\141\162\153er_markers",$lj." - ".__("Support","lmm"),"\074\151mg src=\042".O1."\151\156\143/img/icon-m\145\156\165-help".$Oh.".png\042\076\040".__("\123upport","\154mm"),$Oi,"leafletmapsmarker\137\150\145lp",array( &$this,"lmm_help")); $page10=add_submenu_page("\154\145\141fletmapsma\162\153\145r_markers",$lj." - ".__("License sett\151\156\147s","\154\155\155"),"<h\162\040\156oshade size=\042\061\042/><img \163\162\143=\042".O1."\151\156\143/img/icon-menu\055\163\145ttings".$Oh."\056\160ng\042> ".__("License \163\145\164tings","\154\155\155"),$Oi,"le\141\146\154etmapsmarker_li\143\145\156se","\155\141ps_marker_pro_lic\145\156\163e_activation\137\160\141ge"); } else { $page8=""; $page10=""; } add_action("admin_print_scri\160\164\163-".$page3,array( &$this,"\154\155m_admin_enq\165\145\165e_scripts"),7); add_action("admin_print_scri\160\164\163-".$page5,array( &$this,"\154\155m_admin_enqueue\137\163\143ripts"),8); add_action("adm\151\156\137print_styles-".$page3,array( &$this,"lmm_admin_se\154\145\143tjs"),011); add_action("\141\144min_print_scrip\164\163\055".$page7,array( &$this,"\154mm_admin_selectj\163"),011); add_action("\141\144min_print_sty\154\145\163-".$page3,array( &$this,"lmm_admin_enqueue\137\163\164ylesheets_l\145\141\146let"),023); add_action("\141\144min_print_styles-".$page5,array( &$this,"\154\155m_admin_enqu\145\165\145_stylesheets\137\154\145aflet"),023); add_action("\141dmin_print_styl\145\163\055".$page,array( &$this,"lmm_adm\151\156\137enqueue_styl\145\163\150eets"),021); add_action("ad\155\151\156_print_styles\055".$page2,array( &$this,"\154\155m_admin_enqueue\137\163\164ylesheets"),022); add_action("\141dmin_print_styles\055".$page3,array( &$this,"\154\155\155_admin_enque\165\145\137stylesheets"),023); add_action("\141dmin_pr\151\156\164_styles-".$page3b,array( &$this,"\154mm_admin_enq\165\145\165e_stylesheet\163"),023); add_action("adm\151\156\137print_styles-".$page4,array( &$this,"\154\155m_admin_enqu\145\165\145_stylesheets"),024); add_action("admin_print_styl\145\163\055".$page5,array( &$this,"lmm_admin_enqueu\145\137\163tylesheets"),025); add_action("\141\144\155in_print_sty\154\145\163-".$page6,array( &$this,"\154mm_admin_enqueue_\163\164\171lesheets"),026); add_action("admin_print_styl\145\163\055".$page7,array( &$this,"lmm_admin_enqueue_s\164\171\154esheets"),027); add_action("\141\144min_print_sty\154\145\163-".$page8,array( &$this,"\154mm_admin_enqueu\145\137\163tylesheets"),027); add_action("\141dmin_print_sty\154\145\163-".$page10,array( &$this,"\154\155m_admin_enq\165\145\165e_stylesheets"),027); add_action("\141\144min_print_sty\154\145\163-".$page3,array( &$this,"\154mm_admin_enqueue_s\164\171\154esheets_da\164\145\160icker"),030); add_action("\141\144min_print_sty\154\145\163-".$page5,array( &$this,"\154\155m_admin_enqueue_\163\164\171lesheets_date\160\151\143ker"),030); add_action("\141\144min_enqueue_s\143\162\151pts",array( &$this,"lmm_admin_enqueue_\163\164\171lesheets_admin\142\141\162"),031); add_action("admin_pr\151\156\164_scripts-".$page,array( &$this,"\154mm_add_cont\145\170\164ual_help")); add_action("\141\144min_print_script\163\055".$page2,array( &$this,"\154mm_add_context\165\141\154_help")); add_action("\141\144min_print_scripts\055".$page3,array( &$this,"l\155\155\137add_contextual_h\145\154\160")); add_action("admin_\160\162\151nt_scripts-".$page3b,array( &$this,"\154mm_add_context\165\141\154_help")); add_action("\141\144min_print_scri\160\164\163-".$page4,array( &$this,"\154mm_add_conte\170\164\165al_help")); add_action("\141\144min_print_scrip\164\163\055".$page5,array( &$this,"\154\155\155_add_contextu\141\154\137help")); add_action("\141\144min_print_scri\160\164\163-".$page6,array( &$this,"\154\155\155_add_contex\164\165\141l_help")); add_action("\141\144\155in_print_scri\160\164\163-".$page7,array( &$this,"\154mm_add_contextual_\150\145\154p")); add_action("admi\156\137\160rint_scripts-".$page8,array( &$this,"\154\155m_add_contextual\137\150\145lp")); add_action("admin_p\162\151\156t_scripts-".$page10,array( &$this,"\154mm_add_contex\164\165\141l_help")); add_action("adm\151\156\137print_scripts-".$page3,array( &$this,"\154mm_admin_enque\165\145\137scripts_jquery\144\141\164epicker")); add_action("\141\144min_print_sc\162\151\160ts-".$page5,array( &$this,"\154\155\155_admin_enque\165\145\137scripts_jquer\171\144\141tepicker")); add_action("admin_\160\162\151nt_scripts-".$page7,array( &$this,"l\155\155\137admin_bootstrap_\164\141\142s"),011); } function lmm_add_admin_bar_menu() { global $wp_version; $O4=get_option("\154\145\141fletmapsmar\153\145\162_options"); if ($O4["\141\144min_bar_integ\162\141\164ion"] == "ena\142\154\145d" && current_user_can($O4["capabilities_ed\151\164"])) { global $wp_admin_bar; if ($O4["\155isc_whitela\142\145\154_backend"] == "enabled") { $Oj=esc_attr__("Maps","lmm"); $lk=""; } else { $Oj="Maps Marker Pr\157"; $lk=array("\164itle" => "Wordpress-Plugin ".__("by","lmm")." www.mapsmarker\056\143\157m"); } if (version_compare($wp_version,"3.8-alpha",">")) { $Oh="-w\150\151\164e"; $Ok="\074\163pan class=\042\141\142-icon\042>\074\057\163pan><span \143\154\141ss=\042a\142\055\154abel\042\076".$Oj."\074/span>"; } else { $Ok="\074\151mg style=\042\146\154oat:left;margin\072\063\160x 5px 0 0\073\042\040src=\042".O1."inc/img/icon-tin\171\155\143e.png\042\057\076\040".$Oj; $Oh=""; } $menu_items=array(array("\151d" => "lmm","\164\151\164le" => $Ok,"href" => "","meta" => $lk),array("\151d" => "lmm-markers","pa\162\145\156t" => "lmm","ti\164\154\145" => "\074img src=\042".O1."\151\156c/img/icon-menu-l\151\163\164".$Oh.".png\042\076\040".__("Lis\164\040\141ll markers","\154mm"),"href" => l1."admin.\160\150\160?page=leafle\164\155\141psmarker_mar\153\145\162s"),array("\151\144" => "lmm-add-mar\153\145\162","\160\141rent" => "lmm","ti\164\154\145" => "\074\151\155g src=\042".O1."\151\156\143/img/icon-menu-\141\144\144".$Oh."\056\160\156g\042> ".__("\101\144\144 new marker","\154mm"),"href" => l1."admin.php?page\075\154\145afletmapsma\162\153\145r_marker"),array("\151d" => "lmm-import-export","\160arent" => "lmm","ti\164\154\145" => "\074\151mg src=\042".O1."\151\156\143/img/icon-me\156\165\055import-expo\162\164".$Oh.".png\042\076\040".__("Import/Export","\154\155\155"),"href" => l1."admin.php?page=le\141\146\154etmapsmarker\137\151\155port_export"),array("id" => "\154mm-layers","\160\141rent" => "\154mm","title" => "\074img src=\042".O1."\151nc/img/icon-menu-\154\151\163t".$Oh.".png\042\076\040".__("\114\151st all layers","\154\155m"),"hre\146" => l1."admin.php?page=le\141\146\154etmapsmarker\137\154\141yers"),array("\151\144" => "lmm-add-l\141\171\145rs","\160\141rent" => "lmm","\164\151tle" => "<img src=\042".O1."inc/img/icon-me\156\165\055add".$Oh."\056\160ng\042> ".__("Add new layer","\154\155\155"),"\150\162ef" => l1."admi\156\056\160hp?page=leafl\145\164\155apsmarker_la\171\145\162")); if (current_user_can("\141ctivate_plugins") && ($O4["misc_whi\164\145\154abel_backen\144"] == "disabled")) { $menu_items=array_merge($menu_items,array(array("\151d" => "lmm-tools","\160\141\162ent" => "lmm","\164\151tle" => "\074hr style=\042\155\141\162gin:3px 0;\042\040\156oshade size\075\0421\042/><im\147\040\163rc=\042".O1."\151nc/img/icon-\155\145\156u-tools".$Oh.".png\042\076\040".__("Tools","lmm"),"href" => l1."admin.ph\160\077\160age=leafle\164\155\141psmarker_to\157\154\163"),array("\151\144" => "\154\155m-settings","\160\141\162ent" => "lmm","\164\151\164le" => "\074img src=\042".O1."\151\156c/img/icon-menu-\163\145\164tings".$Oh.".png\042\076\040".__("\123\145ttings","lmm"),"href" => l1."\141\144min.php?page=\154\145\141fletmapsmarke\162\137\163ettings"),array("\151d" => "\154mm-api","\160\141rent" => "lmm","\164\151\164le" => "<img src=\042".O1."\151\156\143/img/icon-menu-\141\160\151".$Oh.".png\042\076\040Maps Marker API","href" => l1."\141dmin.php?pag\145\075\154eafletmapsm\141\162\153er_settings\043\154\155m-misc-se\143\164\151on9"))); } if ($O4["misc_whitelabel\137\142\141ckend"] == "d\151\163\141bled") { $menu_items=array_merge($menu_items,array(array("\151\144" => "lmm-help-credits","parent" => "lmm","title" => "\074\151mg src=\042".O1."inc/\151\155\147/icon-menu-hel\160".$Oh.".png\042\076\040".__("\123\165\160port","\154\155m"),"h\162\145\146" => l1."admin.p\150\160\077page=leaflet\155\141\160smarker_help"),array("id" => "lmm-lice\156\163\145","\160arent" => "\154\155\155","\164\151tle" => "\074hr style=\042\155\141rgin:3px 0;\042\040\156oshade size=\042\061\042/><img \163\162\143=\042".O1."\151\156\143/img/icon-men\165\055\163ettings".$Oh."\056\160ng\042> ".__("\114\151\143ense setting\163","lmm"),"\150\162ef" => l1."admin\056\160\150p?page=leafl\145\164\155apsmarker_li\143\145\156se"))); } foreach ($menu_items as $menu_item) { $wp_admin_bar->add_menu($menu_item); } } } function lmm_add_contextual_help() { $helptext="\074p>".__("Do you have q\165\145\163tions or i\163\163\165es with Lea\146\154\145t Maps Ma\162\153\145r? Please \165\163\145 the fol\154\157\167ing supp\157\162\164 channel\163\040appropriate\154\171\056","\154mm")."\074br/>"; $helptext.="\074\163trong>".__("Before you pos\164\040\141 new support\040\164\151cket, pleas\145\040\146ollow th\145\040\151nstructio\156\163\040from <a\040\150ref=\042h\164\164\160://www.\155\141\160smarker\056\143\157m/readm\145\055\146irst\042\040\164arget=\042\137\142lank\042\076\150ttp://www.\155\141psmarker.\143\157\155/read\155\145\055first<\057\141\076 whic\150\040give you \141\040guideline\040\157n how t\157\040\144eal w\151\164h the mos\164\040common i\163\163\165es.","\154mm")."\074/strong></p>"; $helptext.="<ul>"; $helptext.="\074\154i><a href=\042\150\164tps://www.map\163\155\141rker.com/\146\141\161/\042 ta\162\147\145t=\042_\142\154\141nk\042>".__("FAQ","lmm")."</a> (".__("frequently asked q\165\145\163tions","\154mm")."\051</li>"; $helptext.="\074\154i><a href=\042\150\164\164ps://www.map\163\155\141rker.com/d\157\143\163/\042 t\141\162\147et=\042\137\142\154ank\042\076".__("Docu\155\145\156tation","\154\155\155")."\074/a></li>"; $helptext.="\074li><a\040\150ref=\042ht\164\160s://www.mapsma\162\153\145r.com/lo\147\151\156\042 t\141\162\147et=\042\137\142lank\042\076\155apsmarke\162\056com/login<\057\141> (".__("support for pro u\163\145\162s","\154\155m").")</li>"; $helptext.="\074\057ul>"; $screen=get_current_screen(); $screen->add_help_tab(array("i\144" => "lmm_help_t\141\142","\164\151tle" => __("\110elp & Support","lmm"),"\143\157\156tent" => $helptext)); } function lmm_admin_selectjs() { $l5=get_option("\154\145afletmapsmarker_\166\145\162sion"); wp_enqueue_script(array("jquery")); wp_enqueue_script("\154\145afletmapsmarker\055\163elect2",LEAFLET_PLUGIN_URL."inc/js/select2/s\145\154\145ct2.min.j\163",array("jquery"),$l5); wp_enqueue_style("\154eafletmapsmar\153\145\162-select2",LEAFLET_PLUGIN_URL."\151nc/js/select2/sel\145\143\1642.css",array(),$l5); wp_localize_script("leafletmapsmarker-\163\145\154ect2","\155apsmarkerjspro",array("settings_search_\160\154\141ceholder" => __("\163tart full-t\145\170\164 search","\154\155m"),"settings_\163\145\141rch_no_resul\164\163" => __("\116\157 matches found","\154\155m"))); } function lmm_admin_bootstrap_tabs() { $l5=get_option("leafle\164\155\141psmarker_ver\163\151\157n"); wp_enqueue_script(array("jquery")); wp_enqueue_script("\154\145afletmapsmarker-\142\157\157tstrap-tabs",LEAFLET_PLUGIN_URL."\151\156c/js/bootstr\141\160\055tabs.min.js",array("jquery"),$l5); } function lmm_frontend_enqueue_scripts() { global $locale; $O4=get_option("leafletmapsm\141\162\153er_options"); $l5=get_option("\154\145afletmapsmarke\162\137\166ersion_pro"); $google_adsense_status=$O4["google_a\144\163\145nse_status"]; if ($google_adsense_status == "\145\156abled") { $gmaps_libraries="&libraries=adsen\163\145"; } else { $gmaps_libraries=""; } if ($O4["google_maps_lan\147\165age_localization"] == "\142\162\157wser_setting") { $google_language=""; } else if ($O4["\147\157ogle_maps_langu\141\147\145_localizatio\156"] == "\167ordpress_sett\151\156\147") { if ($locale != NULL) { $google_language="\046language=".substr($locale,0,2); } else { $google_language="\046\154anguage=en"; } } else { $google_language="\046\154anguage=".$O4["go\157\147\154e_maps_languag\145\137\154ocalizatio\156"]; } if ($O4["google_map\163\137\142ase_domain_c\165\163\164om"] == "") { $gmaps_base_domain="&base_domain=".$O4["googl\145\137\155aps_base_dom\141\151\156"]; } else { $gmaps_base_domain="\046base_domain=".htmlspecialchars($O4["\147oogle_maps_b\141\163\145_domain_custo\155"]); } if ( isset ($O4["google_maps_api_\153\145\171"]) && ($O4["google_maps_api_k\145\171"] != NULL)) { $google_maps_api_key=$O4["\147\157ogle_maps_ap\151\137\153ey"]; } else { $google_maps_api_key=""; } $ll=(is_ssl() == TRUE) ? "\150\164tps": "\150\164\164p"; if ($O4["\147oogle_maps_api_\163\164\141tus"] == "enabled") { if ($O4["\155isc_javascri\160\164\137header_footer\137\160\162o"] == "footer") { wp_register_script("\154eafletmapsmarker-\147\157\157glemaps-loade\162",$ll."://www.\147\157\157gle.com/jsapi?k\145\171\075".$google_maps_api_key,array(),.37e1,TRUE); } else { wp_enqueue_script("leafle\164\155apsmarker-g\157\157glemaps-loader",$ll."\072//www.go\157\147\154e.com/jsa\160\151\077key=".$google_maps_api_key,array(),.37e1,TRUE); } } $google_styling_json=($O4["googl\145\137\163tyling_jso\156"] == NULL) ? "disabled": str_replace("\042","\047",$O4["google_styl\151\156\147_json"]); if ($O4["bin\147\155\141ps_culture"] == "automati\143") { if ($locale != NULL) { $bing_culture=str_replace("\137","-",$locale); } else { $bing_culture="en_us"; } } else { $bing_culture=$O4["bingmaps_cult\165\162\145"]; } if ($O4["go\157\147\154e_maps_api_stat\165\163"] == "\145nabled") { if ($O4["misc_javascript_\150\145\141der_footer_p\162\157"] == "footer") { wp_register_script("leafl\145\164\155apsmarker-co\162\145",O1."\154eaflet-dist/leafle\164\055core.js",array("leafletmapsmark\145\162\055googlemaps-l\157\141\144er"),$l5,FALSE); wp_register_script("\154\145afletmapsmar\153\145\162-addons",O1."leaflet-dis\164\057\154eaflet-addo\156\163\056js",array("\154eafletmapsmarker-c\157\162\145"),$l5,FALSE); wp_register_script("\163how_map",O1."inc/js/show_\155\141\160.js",array("\154eafletmapsmarke\162\055\143ore","\154\145afletmapsmarker-\141\144\144ons"),$l5,FALSE); } else { wp_enqueue_script("\154\145\141fletmapsmarker\055\143\157re",O1."\154eaflet-dist/leaf\154\145\164-core.js",array("\154eafletmapsmar\153\145\162-googlemaps-l\157\141\144er"),$l5,FALSE); wp_enqueue_script("l\145\141\146letmapsmarker-\141\144\144ons",O1."\154\145aflet-dist/leafle\164\055\141ddons.js",array("\154eafletmapsmarker-\143\157\162e"),$l5,FALSE); } } else { if ($O4["\155isc_javascr\151\160\164_header_footer\137\160\162o"] == "f\157\157\164er") { wp_register_script("le\141\146\154etmapsmarker-c\157\162\145",O1."leaflet-dist/leaf\154\145\164-core.js",array(),$l5,FALSE); wp_register_script("leafletmaps\155\141\162ker-addons",O1."\154eaflet-dist/le\141\146\154et-addons.js",array("leafletmapsmarke\162\055\143ore"),$l5,FALSE); wp_register_script("show_map",O1."inc/js/show_map.\152\163",array("\154eafletmapsma\162\153\145r-core","\154\145afletmapsmarker-ad\144\157\156s"),$l5,FALSE); } else { wp_enqueue_script("leafletmapsmarker-c\157\162\145",O1."lea\146\154\145t-dist/leaflet-\143\157\162e.js",array(),$l5,FALSE); wp_enqueue_script("l\145\141\146letmapsmarker-\141\144\144ons",O1."\154eaflet-dist/l\145\141flet-addons.js",array("leafletmapsmarke\162\055core"),$l5,FALSE); } } if ($google_adsense_status == "disabl\145\144") { wp_localize_script("leafletmapsmarker\055\143\157re","mapsmarkerjsp\162\157",array("\172oom_in" => __("\132oom in","l\155\155"),"zoom_o\165\164" => __("\132\157om out","lmm"),"\147\157oglemaps_language" => $google_language,"go\157\147\154emaps_libraries" => $gmaps_libraries,"googlemaps_bas\145\137\144omain" => $gmaps_base_domain,"bing_culture" => $bing_culture,"\147\157ogle_adsense_sta\164\165\163" => $google_adsense_status,"\147oogle_styling_json" => $google_styling_json,"minimap_s\150\157\167" => __("\123how minimap","lmm"),"minimap_\150\151\144e" => __("\110\151de minimap","lmm"),"\155\151\156imap_status" => $O4["min\151\155\141p_status"],"\146\165llscreen_button_ti\164\154\145" => __("View fullsc\162\145\145n","l\155\155"),"\146\165llscreen_butto\156\137\164itle_exit" => __("Exit fullscreen","l\155\155"),"\146ullscreen_button\137\160\157sition" => $O4["map_fullscreen_bu\164\164\157n_position"],"maxzoom" => intval($O4["globa\154\137\155axzoom_level"]),"google_maps\137\141\160i_status" => $O4["\147\157\157gle_maps_api_s\164\141\164us"],"meters" => __("met\145\162\163","lmm"),"\146\145\145t" => __("feet","lmm"))); } else { $google_adsense_format=$O4["goog\154\145\137adsense_for\155\141\164"]; $google_adsense_position=$O4["\147\157ogle_adsense\137\160\157sition"]; $google_adsense_backgroundColor=htmlspecialchars($O4["google_adsense_bac\153\147\162oundColor"]); $google_adsense_borderColor=htmlspecialchars($O4["\147oogle_adsense_bo\162\144\145rColor"]); $google_adsense_titleColor=htmlspecialchars($O4["google_adsense_b\157\162derColor"]); $google_adsense_textColor=htmlspecialchars($O4["\147oogle_adsense_tex\164\103\157lor"]); $google_adsense_urlColor=htmlspecialchars($O4["\147oogle_adsens\145\137\165rlColor"]); $google_adsense_channelNumber=htmlspecialchars($O4["google_adsens\145\137\143hannelNum\142\145\162"]); $google_adsense_publisherId=htmlspecialchars($O4["\147\157\157gle_adsense\137\160\165blisherId"]); wp_localize_script("\154\145afletmapsmarker\055\143\157re","\155\141psmarkerjspro",array("zoom_in" => __("Zoom in","lmm"),"zoom_out" => __("\132\157om out","\154\155\155"),"go\157\147\154emaps_language" => $google_language,"google\155\141\160s_libraries" => $gmaps_libraries,"\147\157\157glemaps_base_\144\157\155ain" => $gmaps_base_domain,"\142ing_culture" => $bing_culture,"google_ad\163\145\156se_status" => $google_adsense_status,"\147oogle_adsens\145\137\146ormat" => $google_adsense_format,"\147oogle_adsense_p\157\163\151tion" => $google_adsense_position,"\147\157\157gle_adsense\137\142\141ckgroundColor" => $google_adsense_backgroundColor,"googl\145\137\141dsense_borderC\157\154\157r" => $google_adsense_borderColor,"\147\157\157gle_adsens\145\137\164itleColor" => $google_adsense_titleColor,"\147\157\157gle_adsense_\164\145\170tColor" => $google_adsense_textColor,"\147\157ogle_adsense_u\162\154\103olor" => $google_adsense_urlColor,"\147\157\157gle_adsense_cha\156\156\145lNumber" => $google_adsense_channelNumber,"google_adsense_\160\165\142lisherId" => $google_adsense_publisherId,"\147oogle_styling_j\163\157\156" => $google_styling_json,"\155\151\156imap_show" => __("Show min\151\155\141p","lm\155"),"minimap_hide" => __("\110\151\144e minimap","l\155\155"),"minimap_statu\163" => $O4["minimap_s\164\141\164us"],"fullscree\156\137\142utton_title" => __("View fullsc\162\145\145n","lmm"),"\146\165\154lscreen_button_t\151\164\154e_exit" => __("\105xit fullscr\145\145\156","lmm"),"fullscreen_but\164\157\156_position" => $O4["\155ap_fullscree\156\137\142utton_position"],"\155\141\170zoom" => intval($O4["global_maxzoom_\154\145\166el"]),"\147oogle_maps_a\160\151\137status" => $O4["\147\157ogle_maps_ap\151\137\163tatus"],"meters" => __("\155\145\164ers","lmm"),"\146eet" => __("feet","\154mm"))); } } function lmm_admin_enqueue_scripts() { global $wp_version,$locale; $O4=get_option("\154eafletmapsmarker_\157\160\164ions"); $l5=get_option("\154\145afletmapsma\162\153\145r_version_pr\157"); $google_adsense_status=$O4["google_adsense_st\141\164\165s"]; if ($google_adsense_status == "enabled") { $gmaps_libraries="&\154\151\142raries=places,a\144\163\145nse"; } else { $gmaps_libraries="\046libraries=place\163"; } if ($locale != NULL) { $lang=substr($locale,0,2); } else { $lang="\145\156"; } if ($O4["google_maps_lang\165\141ge_localization"] == "browse\162\137\163etting") { $google_language=""; } else if ($O4["google_ma\160\163\137language_loc\141\154\151zation"] == "wo\162\144\160ress_setting") { if ($locale != NULL) { $google_language="\046\154anguage=".substr($locale,0,2); } else { $google_language="\046language=en"; } } else { $google_language="&language=".$O4["google_maps_langu\141\147\145_localizatio\156"]; } if ($O4["google_maps_base_d\157\155\141in_custom"] != "") { $gmaps_base_domain="&base_domain=".$O4["google_maps_bas\145\137\144omain"]; } else { $gmaps_base_domain="\046\142ase_domain=".htmlspecialchars($O4["google_map\163\137\142ase_domain_c\165\163\164om"]); } wp_enqueue_script(array("jquery")); $page=( isset ($_GET["\160age"]) ? $_GET["\160\141ge"]: ""); if ($page == "\154\145\141fletmapsmark\145\162\137layer") { if (version_compare($wp_version,"3.5",">=")) { wp_enqueue_media(); } else { wp_enqueue_style("\164\150ickbox"); wp_enqueue_script("media-up\154\157\141d"); wp_enqueue_script("thickbox"); wp_enqueue_script("\155\145dia-models"); } } if ( isset ($O4["\147oogle_maps_api_\153\145\171"]) && ($O4["google_maps_\141\160\151_key"] != NULL)) { $google_maps_api_key=$O4["\147\157\157gle_maps_api_\153\145\171"]; } else { $google_maps_api_key=""; } $ll=(is_ssl() == TRUE) ? "\150\164tps": "http"; if ($O4["\147\157\157gle_places_st\141\164\165s"] == "enabled") { wp_enqueue_script("leafletmapsmar\153\145\162-googlemaps\055\154\157ader",$ll.":\057\057\167ww.google.com\057\152\163api?key=".$google_maps_api_key,array(),.37e1,TRUE); } $google_styling_json=($O4["\147oogle_styling_j\163\157\156"] == NULL) ? "disabled": str_replace("\042","\047",$O4["google_styl\151\156\147_json"]); if ($O4["\142\151\156gmaps_cultur\145"] == "autom\141\164\151c") { if ($locale != NULL) { $bing_culture=str_replace("_","-",$locale); } else { $bing_culture="\145n_us"; } } else { $bing_culture=$O4["bingmaps_cultur\145"]; } if ($O4["g\157\157\147le_places_st\141\164\165s"] == "\145nabled") { wp_enqueue_script("\154eafletmapsmarker-c\157\162\145",O1."l\145\141\146let-dist/leafl\145\164\055core.js",array("leafletm\141\160\163marker-googlem\141\160\163-loader"),$l5,FALSE); wp_enqueue_script("\154\145afletmapsmarke\162\055\141ddons",O1."\154\145aflet-dist/lea\146\154\145t-addons.js",array("leafletmapsmarker-\143\157\162e"),$l5,FALSE); $lm="enabled"; } else { wp_enqueue_script("\154eafletmapsmar\153\145\162-core",O1."\154\145\141flet-dist/lea\146\154\145t-core.js",array(),$l5,FALSE); wp_enqueue_script("\154\145afletmapsmarker-\141\144\144ons",O1."lea\146\154\145t-dist/leaflet\055\141\144dons.js",array("\154eafletmapsmar\153\145\162-core"),$l5,FALSE); $lm="\144\151sabled"; } if ($google_adsense_status == "disa\142\154\145d") { wp_localize_script("leaflet\155\141\160smarker-core","mapsmarkerjspro",array("zoom_in" => __("\132oom in","lmm"),"\172\157\157m_out" => __("\132\157\157m out","\154mm"),"\147\157oglemaps_language" => $google_language,"googlemaps_libra\162\151\145s" => $gmaps_libraries,"goog\154\145\155aps_base_domain" => $gmaps_base_domain,"bing_cu\154\164\165re" => $bing_culture,"google_ad\163\145\156se_status" => $google_adsense_status,"\147\157\157gle_styling_json" => $google_styling_json,"\155\151nimap_show" => __("Show minimap","lmm"),"minim\141\160\137hide" => __("Hide \155\151\156imap","lmm"),"minimap\137\163\164atus" => $O4["\155\151\156imap_status"],"\146ullscreen_button_t\151\164\154\145" => __("View fulls\143\162\145en","lm\155"),"\146\165llscreen_button_ti\164\154\145_exit" => __("Exit fullscreen","\154\155\155"),"fullscreen_bu\164\164\157n_position" => $O4["map_full\163\143\162een_button_po\163\151\164ion"],"\155axzoom" => intval($O4["\147\154obal_maxzoom_leve\154"]),"google_maps_api_s\164\141\164us" => $lm,"meters" => __("\155\145ters","lmm"),"feet" => __("feet","lmm"))); } else { $google_adsense_format=$O4["\147oogle_adsense_f\157\162\155at"]; $google_adsense_position=$O4["\147oogle_adsense_posi\164\151\157n"]; $google_adsense_backgroundColor=htmlspecialchars($O4["\147\157ogle_adsense_b\141\143\153groundColor"]); $google_adsense_borderColor=htmlspecialchars($O4["\147oogle_adsense_b\157\162\144erColor"]); $google_adsense_titleColor=htmlspecialchars($O4["goo\147\154\145_adsense_border\103\157\154or"]); $google_adsense_textColor=htmlspecialchars($O4["google\137\141\144sense_textCo\154\157\162"]); $google_adsense_urlColor=htmlspecialchars($O4["\147oogle_adsense_url\103\157\154or"]); $google_adsense_channelNumber=htmlspecialchars($O4["g\157\157\147le_adsense_c\150\141\156nelNumber"]); $google_adsense_publisherId=htmlspecialchars($O4["\147\157ogle_adsense_p\165\142\154isherId"]); wp_localize_script("\154eafletmapsmar\153\145\162-core","\155\141\160smarkerjspro",array("zoom\137\151\156" => __("\132oom in","lmm"),"zoom_out" => __("Z\157\157\155 out","lm\155"),"\147\157oglemaps_language" => $google_language,"\147\157\157glemaps_libra\162\151\145s" => $gmaps_libraries,"googlemaps_base_\144\157\155ain" => $gmaps_base_domain,"\142\151\156g_culture" => $bing_culture,"google_ad\163\145\156se_status" => $google_adsense_status,"\147oogle_adsense_fo\162\155\141t" => $google_adsense_format,"google\137\141\144sense_position" => $google_adsense_position,"\147oogle_adsense_b\141\143\153groundColor" => $google_adsense_backgroundColor,"google_adsen\163\145\137borderColor" => $google_adsense_borderColor,"google_adsense_t\151\164\154eColor" => $google_adsense_titleColor,"go\157\147\154e_adsense_textC\157\154\157r" => $google_adsense_textColor,"\147\157ogle_adsense_u\162\154\103olor" => $google_adsense_urlColor,"\147\157\157gle_adsense_cha\156\156\145lNumber" => $google_adsense_channelNumber,"\147\157ogle_adsense_pu\142\154\151sherId" => $google_adsense_publisherId,"google_styling_json" => $google_styling_json,"\155inimap_show" => __("Show minimap","lmm"),"minimap_\150\151\144e" => __("\110\151de minimap","lmm"),"min\151\155\141p_status" => $O4["\155inimap_status"],"\146\165\154lscreen_button_\164\151\164le" => __("View fullscree\156","\154mm"),"fullscreen_but\164\157\156_title_exit" => __("\105xit fullscreen","lm\155"),"\146\165llscreen_button_\160\157\163ition" => $O4["map_fullscreen_\142\165\164ton_position"],"\155axzoom" => intval($O4["g\154\157\142al_maxzoom_level"]),"\147oogle_maps_api\137\163\164atus" => $lm,"meters" => __("\155\145\164ers","lmm"),"feet" => __("fee\164","lmm"))); } } function lmm_admin_enqueue_scripts_jquerydatepicker() { $l5=get_option("\154eafletmapsmarke\162\137\166ersion_pro"); wp_enqueue_script(array("jquery","jquery-ui-ta\142\163","jquery-ui-datepic\153\145\162","\152\161\165ery-ui-slider")); wp_enqueue_script("\152\161uery-ui-time\160\151\143ker-addon",O1."\151\156\143/js/jquery-ui-\164\151\155epicker-add\157\156\056js",array("\152\161\165ery","jquery-ui-tab\163","\152\161uery-ui-datepick\145\162"),$l5); } function lmm_frontend_enqueue_stylesheets() { $O4=get_option("\154eafletmapsmarker_\157\160\164ions"); global $wp_query; $posts=$wp_query->posts; $pattern=get_shortcode_regex(); $l5=get_option("l\145\141\146letmapsmarker_v\145\162\163ion_pro"); if (function_exists("\151\163_rtl") && is_rtl()) { $Om="\154eafletmapsmark\145\162\055rtl"; $ln="leaf\154\145\164-rtl.min.css"; } else { $Om="leafletm\141\160\163marker"; $ln="\154eaflet.min.css"; } wp_register_style($Om,O1."\154\145aflet-dist/".$ln,array(),$l5); if (is_array($posts)) { foreach ($posts as $post) { if (preg_match_all("\057".$pattern."\057\163",$post->post_content ,$matches) && array_key_exists(2,$matches) && in_array($O4["\163\150ortcode"],$matches[2])) { wp_enqueue_style($Om); break; } } $lmm_custom_css=".leaflet-po\160\165\160-content \151\155\147 \173 ".htmlspecialchars($O4["defaults_mar\153\145r_popups_image_\143\163\163"])." \175\040\056marker-clus\164\145\162-small \173\040\142\141ckgroun\144\055\143olor: ".htmlspecialchars($O4["\143\154ustering_color\137\163\155all"])."; } .marke\162\055\143luster-small \144\151\166 \173 back\147\162\157und-color:\040".htmlspecialchars($O4["clustering_colo\162\137\163mall_inner"])."\073\040color: ".htmlspecialchars($O4["clus\164\145\162ing_color_sma\154\154\137text"])."\073\040\175 .marker-clu\163\164\145r-medium \173\040\142\141ckground-\143\157\154or: ".htmlspecialchars($O4["clustering_c\157\154\157r_medium"])."\073\040\175 .marker-clus\164\145\162-medium div \173\040\142ackground\055\143\157lor: ".htmlspecialchars($O4["\143\154ustering_colo\162\137\155edium_inner"])."\073\040\040color: ".htmlspecialchars($O4["clusteri\156\147\137color_medium_\164\145\170t"])."; } .m\141\162\153er-cluster-lar\147\145\040\173 back\147\162\157und-color:\040".htmlspecialchars($O4["\143lustering_color_la\162\147\145"])."; } .marker-cl\165\163\164er-large di\166\040\173 backgroun\144\055\143olor: ".htmlspecialchars($O4["\143lustering_co\154\157\162_large_inner"])."\073\040 color: ".htmlspecialchars($O4["\143lustering_co\154\157\162_large_text"])."; \175"; wp_add_inline_style($Om,$lmm_custom_css); } } function lmm_template_check_shortcode($template) { $O4=get_option("\154eafletmapsmarke\162\137\157ptions"); $searchterm="\133".$O4["\163hortcode"]; $files=array($template,get_stylesheet_directory().DIRECTORY_SEPARATOR."header.php",get_stylesheet_directory().DIRECTORY_SEPARATOR."\146\157oter.php"); if (function_exists("\151s_rtl") && is_rtl()) { $Om="\154eafletmapsm\141\162\153er-rtl"; $ln="\154eaflet-rtl.m\151\156\056css"; } else { $Om="\154\145\141fletmapsmark\145\162"; $ln="leaflet.min.css"; } foreach ($files as $file) { if (file_exists($file)) { $contents=file_get_contents($file); if (strpos($contents,$searchterm)) { $l5=get_option("leafletmaps\155\141\162ker_version\137\160\162o"); wp_register_style($Om,O1."leaflet-dist/".$ln,array(),$l5); wp_enqueue_style($Om); break; } } } return $template; } function lmm_admin_enqueue_stylesheets() { $l5=get_option("\154eafletma\160\163\155arker_version\137\160\162o"); if (function_exists("\151\163_rtl") && is_rtl()) { wp_register_style("leafletmapsmarke\162\055admin-rtl",O1."inc/\143\163\163/leafletmapsma\162\153\145r-admin-rtl.\143\163\163",array(),$l5); wp_enqueue_style("\154\145\141fletmapsmar\153\145\162-admin-rtl"); } else { wp_register_style("leafletm\141\160\163marker-admin",O1."\151\156c/css/leafletm\141\160\163marker-admin\056\143\163s",array(),$l5); wp_enqueue_style("l\145\141\146letmapsmarker-\141\144\155in"); } } function lmm_admin_enqueue_stylesheets_leaflet() { global $wp_version; $l5=get_option("leafletmapsm\141\162\153er_version_\160\162\157"); if (function_exists("is_rtl") && is_rtl()) { $Om="\154\145afletmapsmarker\055\162\164l"; $ln="\154eaflet-rtl.min.c\163\163"; } else { $Om="l\145\141\146letmapsmarker"; $ln="leaflet.min.css"; } wp_register_style($Om,O1."\154eaflet-dist/".$ln,array(),$l5); wp_enqueue_style($Om); if (version_compare($wp_version,"\063.7",">=")) { $O4=get_option("\154\145\141fletmapsmarke\162\137\157ptions"); $lmm_custom_css="\056leaflet-popup-con\164\145\156t img \173 ".htmlspecialchars($O4["defaults_marker\137\160\157pups_image_\143\163\163"])." } .marker\055\143\154uster-small \173\040\142ackground-co\154\157\162: ".htmlspecialchars($O4["\143lustering_color_\163\155\141ll"])."; } .marker-cl\165\163\164er-small div\040\173\040backgroun\144\055\143olor: ".htmlspecialchars($O4["clust\145\162\151ng_color_smal\154\137\151nner"])."\073\040\143olor: ".htmlspecialchars($O4["clustering_c\157\154\157r_small_text"])."; \175\040\056marker-clust\145\162\055medium \173\040\142\141ckground-\143\157\154or: ".htmlspecialchars($O4["\143lustering_color_m\145\144\151um"])."; } .marker\055\143\154uster-medium\040\144\151v \173 b\141\143\153ground-col\157\162\072 ".htmlspecialchars($O4["clusterin\147\137\143olor_medium_i\156\156\145r"])."; color: ".htmlspecialchars($O4["\143lustering_color_m\145\144\151um_text"])."; } .mar\153\145\162-cluster-large \173\040\142ackground-c\157\154\157r: ".htmlspecialchars($O4["\143\154ustering_color_l\141\162\147e"])."; } .marker-cluste\162\055\154arge div \173\040\142ackground-c\157\154\157r: ".htmlspecialchars($O4["\143\154ustering_color_la\162\147\145_inner"])."; color: ".htmlspecialchars($O4["clustering_color_l\141\162\147e_text"])."; }"; wp_add_inline_style($Om,$lmm_custom_css); } } function lmm_admin_enqueue_stylesheets_datepicker() { $l5=get_option("leafletmap\163\155\141rker_versio\156\137\160ro"); wp_register_style("lea\146\154\145tmapsmarker-jqu\145\162\171-ui-custom",O1."\151\156c/css/jquery-date\160\151\143ker-theme/j\161\165\145ry-ui-cust\157\155\056css",array(),$l5); wp_enqueue_style("\154eafletmapsmark\145\162\055jquery-ui-c\165\163\164om"); } function lmm_admin_enqueue_stylesheets_adminbar() { $O4=get_option("\154eafletmapsma\162\153\145r_options"); if ($O4["admin_bar_int\145\147\162ation"] == "enabled" && current_user_can($O4["\143\141pabilities_edi\164"])) { $l5=get_option("leafletmapsmarker_\166\145\162sion_pro"); wp_register_style("\154\145afletmapsmarker-\141\144\155in-adminbar",O1."inc/css/leafle\164\155\141psmarker-ad\155\151\156-adminbar.cs\163",array(),$l5); wp_enqueue_style("leafletma\160\163\155arker-admin-adm\151\156\142ar"); } } function lmm_install_and_updates() { $current_version="vp191"; $schedule_transient="leafletmapsmar\153\145\162_install_upda\164\145\137cache_".$current_version; $install_update_schedule=get_transient($schedule_transient); if ($install_update_schedule === FALSE) { $schedule_transient="leaflet\155\141\160smarker_ins\164\141\154l_update_cac\150\145\137".$current_version; set_transient($schedule_transient,"execute install \141\156\144 update-routi\156\145\040only once \141\040\144ay",074*074*030); include ("\151nc".DIRECTORY_SEPARATOR."\151nstall-and-u\160\144\141tes.php"); } } function lmm_plugin_meta_links() { define( "FB_BASENAME" ,plugin_basename( __FILE__)); define( "FB_BASEFOLDER" ,plugin_basename(dirname( __FILE__))); define( "FB_FILENAME" ,str_replace(FB_BASEFOLDER."/","",plugin_basename( __FILE__))); function leafletmapsmarker_filter_plugin_meta($links,$file) { if ($file == FB_BASENAME) { array_unshift($links,"<a href=\042".l1."admin.php\077\160\141ge=leafletmap\163\155\141rker_marker\163\042\076".__("Mark\145\162\163","lmm")."</a>","<a href=\042".l1."\141dmin.php?page=l\145\141\146letmapsmarke\162\137\154ayers\042\076".__("\114\141\171ers","lmm")."</a>","\074a href=\042".l1."\141\144\155in.php?page=le\141\146\154etmapsmarke\162\137\163ettings\042\076".__("\123ettings","\154\155\155")."\074/a>","\074a href=\042".l1."ad\155\151\156.php?page=leafl\145\164\155apsmarker_li\143\145\156se\042>".__("License","lmm")."\074/a>"); } return $links; } add_filter("plugin_action_link\163","leafle\164\155\141psmarker_filter\137\160\154ugin_meta",012,2); } } if (is_admin()) { $On= isset ($_GET["page"]) ? $_GET["page"]: ""; $lo=array("\154\145afletmapsmar\153\145\162_markers","leafletmapsmarke\162\137\155arker","\154\145afletmapsmarker\137\151\155port_export","leafletmap\163\155\141rker_layers","\154\145afletmapsma\162\153\145r_layer","\154\145\141fletmapsmarke\162\137\164ools","\154\145\141fletmapsmark\145\162\137settings"); if ((in_array($On,$lo)) && (O3() === FALSE)) { if (Oo() !== TRUE) { exit (header("Location: ".l1."\141\144\155in.php?page=\154\145\141fletmapsmarke\162\137\154icense")); } if (la($Oa=l0,$lb=FALSE) === FALSE) { $lp=array("\154eafletmapsmark\145\162\137markers","\154\145afletmapsmarker_\155\141\162ker","\154\145afletmapsmarker\137\151\155port_export","\154eafletmapsmarke\162\137\154ayers","\154\145\141fletmapsmarker\137\154\141yer","\154\145\141fletmapsmarker_\164\157\157ls","lea\146\154\145tmapsmarker_set\164\151\156gs"); if (in_array($On,$lp)) { echo "\074\163cript type=\042\164\145xt/javascript\042\076\167indow.lo\143\141\164ion.href\040\075\040\042".l1."\141\144\155in.php?page=l\145\141\146letmapsmarker\137\154\151cense&erro\162\075\154e\042;<\057\163\143ript>  "; } } } } function Op($lq,$is_theme=FALSE) { $Oq=""; if ( isset ($_GET["page"])) { $Oq=$_GET["\160age"]; } elseif ( isset ($_POST["\160\141ge"])) { $Oq=$_POST["\160\141\147e"]; } $lr=in_array($Oq,$lq); if ($is_theme) { return $lr; } $ls=in_array(plugin_basename( __FILE__),get_option("active_pl\165\147\151ns")); return ($lr && $ls); } function Oo($Os=FALSE) { $lt=new Ot; $lt->lu ="database"; $lt->Ou =array("local_key" => get_option("\154\145\141fletmapsmarke\162\160\162o_license_loc\141\154\137key")); $lt->lv =array("\146unction" => "\165\160\144ate_option","key" => "\154eafletmapsmark\145\162\160ro_license_lo\143\141\154_key"); $lt->Ov ="1,2,3,\064\054\065,6,7,8,9,\061\060"; $lt->lw =get_option("\154eafletmapsmar\153\145\162pro_license_\153\145\171"); $lt->Ow ="\067\143a99e156b5e3\060\145\060648f49b811\067\070\143d7e"; $lt->lx ="h\164\164\160s://www.mapsmark\145\162\056com/store/a\160\151\057index.php"; $lt->validate(); if ($Os) { return $lt; } $lq=array("leafl\145\164\155apsmarker_ma\162\153\145rs","\154\145afletmapsmark\145\162\137marker","\154eafletmapsmark\145\162\137import_export","\154eafletmapsmarker_l\141\171\145rs","l\145\141\146letmapsmarker_la\171\145\162","\154\145\141fletmapsmark\145\162\137tools","\154\145afletmapsmarker_se\164\164\151ngs"); if (is_admin() && Op($lq,TRUE) && $lt->Ox) { return $lt->Ox; } return TRUE; } function la($Oa=FALSE,$lb=FALSE) { $lt=new Ot; if ($Oa !== FALSE) { $lt->Oa =strrev(substr($Oa,1,012)); } $lt->lu ="\144atabase"; $lt->Ou =array("\154ocal_key" => get_option("leafletmapsma\162\153\145rpro_license_\154\157\143al_key")); $lt->lv =array("function" => "update_optio\156","key" => "leafletmapsm\141\162\153erpro_license\137\154\157cal_key"); $lt->Ov ="\061,2,3,4,5,6,7,8,9\054\061\060"; $lt->lw =get_option("\154eafletmapsm\141\162\153erpro_licens\145\137\153ey"); $lt->Ow ="7ca99e1\065\066\1425e30e0648f4\071\142\0701178cd7e"; $lt->lx ="\150\164\164ps://www.maps\155\141\162ker.com/stor\145\057\141pi/index.p\150\160"; $lt->validate(); if ($lb !== FALSE) { if ($lt->Ox) { return FALSE; } else { return TRUE; } } if ($lt->Ox) { return FALSE; } if ($Oa === FALSE) { $ly=$lt->Oy["\144ownload_acce\163\163\137expires"]; $lz=$lt->Oy["support_access_e\170\160ires"]; $Oz=abs(($ly>$lz) ? $ly: $lz); if (!l10()) { if ($lt->Oy["\154icense_expires"] == "\156ever") { return FALSE; } if (time()>$lt->Oy["\154\151cense_expires"]) { return FALSE; } return TRUE; } return ($Oz>time()) ? TRUE: FALSE; } else if ($Oa !== FALSE) { $ly=$lt->Oy["\144\157\167nload_acces\163\137\145xpires"]; $lz=$lt->Oy["\163upport_access_e\170\160\151res"]; $Oz=abs(($ly>$lz) ? $ly: $lz); if (!l10()) { if ($lt->Oy["lic\145\156\163e_expires"] == "never") { return FALSE; } if (time()>$lt->Oy["\154icense_expires"]) { return FALSE; } return TRUE; } if ($lt->Oa >$Oz) { return FALSE; } else { return TRUE; } } } function lmm_validate_license_info($release_date_info=FALSE,$license_only_info=FALSE) { $spbas_info=new Ot; if ($release_date_info !== FALSE) { $spbas_info->release_date_info =strrev(substr($release_date_info,1,012)); } $spbas_info->lu ="database"; $spbas_info->Ou =array("\154ocal_key" => get_option("\154eafletmapsmark\145\162\160ro_license_\154\157\143al_key")); $spbas_info->lv =array("function" => "update\137\157\160tion","\153\145y" => "leafletmaps\155\141\162kerpro_licen\163\145\137local_key"); $spbas_info->Ov ="1,2,3,4,5\054\066,7,8,9,10"; $spbas_info->lw =get_option("\154\145afletmapsmar\153\145\162pro_license_\153\145\171"); $spbas_info->Ow ="7ca99e\061\065\066b5e30e0648\146\064\071b81178cd7e"; $spbas_info->lx ="\150ttps://www.m\141\160\163marker.com/sto\162\145\057api/index\056\160\150p"; $spbas_info->validate(); if ($license_only_info !== FALSE) { if ($spbas_info->Ox) { return FALSE; } else { return TRUE; } } if ($spbas_info->Ox) { return FALSE; } if ($release_date_info === FALSE) { $download_expires_info=$spbas_info->Oy["download_access_e\170\160\151res"]; $support_expires_info=$spbas_info->Oy["support_access_e\170\160\151res"]; $expires_info=abs(($download_expires_info>$support_expires_info) ? $download_expires_info: $support_expires_info); if (!l10()) { if ($spbas_info->Oy["\154icense_expires"] == "never") { return FALSE; } if (time()>$spbas_info->Oy["l\151\143\145nse_expires"]) { return FALSE; } return TRUE; } return ($expires_info>time()) ? TRUE: FALSE; } else if ($release_date_info !== FALSE) { $download_expires_info=$spbas_info->Oy["downloa\144\137\141ccess_expir\145\163"]; $support_expires_info=$spbas_info->Oy["support_ac\143\145\163s_expires"]; $expires_info=abs(($download_expires_info>$support_expires_info) ? $download_expires_info: $support_expires_info); if (!l10()) { if ($spbas_info->Oy["\154icense_expires"] == "\156ever") { return FALSE; } if (time()>$spbas_info->Oy["license_e\170\160\151res"]) { return FALSE; } return TRUE; } if ($spbas_info->Oa >$expires_info) { return FALSE; } else { return TRUE; } } } function l10($prefix="MapsMarkerPro-") { return substr(get_option("l\145\141\146letmapsmarke\162\160\162o_license_ke\171"),0,strlen($prefix)) == $prefix; } function lmm_pro_version_info($prefix="\115apsMarkerPro\055") { return substr(get_option("leaflet\155\141\160smarkerpro_lice\156\163\145_key"),0,strlen($prefix)) == $prefix; } function O10($prefix="\115apsMarkerPro-5P-") { return substr(get_option("leafletma\160\163\155arkerpro_lice\156\163\145_key"),0,strlen($prefix)) == $prefix; } function l11($prefix="Map\163\115\141rkerPro-25P-") { return substr(get_option("leafletm\141\160\163markerpro_lic\145\156\163e_key"),0,strlen($prefix)) == $prefix; } function O11($prefix="\115\141\160sMarkerPro-1\060\060\120-") { return substr(get_option("\154\145afletmapsmar\153\145\162pro_license\137\153\145y"),0,strlen($prefix)) == $prefix; } function l12($prefix="\115\141\160sMarkerPro-2\065\060\120-") { return substr(get_option("\154\145afletmapsmar\153\145\162pro_license_k\145\171"),0,strlen($prefix)) == $prefix; } function O12($prefix="MapsMarkerPro-500\120\055") { return substr(get_option("\154eafletmapsmarkerp\162\157\137license_key"),0,strlen($prefix)) == $prefix; } function l13($prefix="Maps\115\141\162kerPro-1000P-") { return substr(get_option("leafle\164\155\141psmarkerpro_lic\145\156\163e_key"),0,strlen($prefix)) == $prefix; } function O13($attribute) { if ( isset ($_POST[$attribute]) && ($_POST[$attribute] == TRUE)) { return $_POST[$attribute]; } global $current_user; get_currentuserinfo(); switch ($attribute) { case "maps_marker\137\160ro_first_name": return $current_user->user_firstname; case "\155\141\160s_marker_pro_\154\141\163t_name": return $current_user->user_lastname; case "maps_marker_\160\162\157_email": return $current_user->user_email; } return ""; } function maps_marker_pro_license_activation_page() { if ( isset ($_POST["maps_marker_pr\157\137\162egister_fre\145"])) { $lt=new Ot; $l14=""; $O14=array(); if (!$_POST["maps_m\141\162\153er_pro_first_n\141\155\145"]) { $O14[]=__("Please\040\145\156ter your fir\163\164\040name to \143\157\156tinue.","lmm"); } if (!$_POST["\155\141ps_marker_pro_\154\141\163t_name"]) { $O14[]=__("\120\154\145ase enter yo\165\162\040last name t\157\040\143ontinue.","lmm"); } if (!$_POST["\155aps_marker_pro_ema\151\154"]) { $O14[]=__("\120lease enter your e\155\141\151l to continu\145\056","\154\155\155"); } if (sanitize_email($_POST["\155\141ps_marker_pro_em\141\151\154"]) !== $_POST["maps_ma\162\153\145r_pro_email"]) { $O14[]=__("Plea\163\145\040enter a valid\040\145\155ail to co\156\164\151nue (or ge\164\040\141n anonymo\165\163\040trial l\151\143\145nse key\051","\154\155\155"); } if (!$_POST["\155\141\160s_marker_pro_t\157\163"]) { $O14[]=__("\131\157u must agree to \164\150\145 TOS to con\164\151\156ue.","\154mm"); } if (empty($O14)) { $qs="mod=3rd_party&task\075\141\160i&api_key=5\060\141\062094314fbc\070\062\145712b3f9b\062\061f00745&email\075".urlencode(sanitize_email($_POST["\155aps_marker_pro_\145\155\141il"]))."\046\146irst_name=".urlencode($_POST["\155aps_marker_pro_fi\162\163\164_name"])."&last_name=".urlencode($_POST["\155aps_marker_pr\157\137\154ast_name"])."\046company_name=".urlencode($_POST["\155\141ps_marker_pro_\146\151\162st_name"])."%20".urlencode($_POST["\155aps_marker_pro_l\141\163\164_name"])."&username=".strtolower(sanitize_user($_POST["\155\141ps_marker_pro_last\137\156\141me"],$l15=TRUE).substr(sanitize_user($_POST["\155aps_marker_pro_fi\162\163\164_name"],$l15=TRUE),0,1)); $O15=$lt->l16("\150\164tps://www.mapsmar\153\145\162.com/store/a\160\151\057index.php",$qs); if (strtolower(substr($O15,0,021)) == "connection error\072") { $O14[]=$O15; } else if (strtolower(substr($O15,0,5)) == "\145\162ror") { $O14[]=$O15; } else { $O15=json_decode($O15); update_option("leafle\164\155\141psmarkerpro_l\151\143\145nse_key",$lt->lw =$O15[0]); update_option("leaf\154\145\164mapsmarkerpro\137\154\151cense_local_\153\145\171",""); update_option("\154\145afletmapsmar\153\145\162pro_license_ke\171\137\164rial",$lt->lw =$O15[0]); $l14=__("Your new license\040\167\141s registere\144\040\163uccessfull\171\041","\154\155m"); } } } else if ( isset ($_POST["\155aps_marker_p\162\157\137register_fre\145\137\141nonym"])) { $lt=new Ot; $l14=""; $O14=array(); if (!$_POST["\155\141ps_marker_pro_tos"]) { $O14[]=__("\131\157u must agree to t\150\145\040TOS to cont\151\156\165e.","\154mm"); } if (empty($O14)) { $qs="mod=3rd_pa\162\164\171&task=api&api\137\153\145y=f8b3782fef2\065\143\063f68e809f\066\062\061d193063"; $O15=$lt->l16("\150\164tps://www.mapsmark\145\162\056com/store/ap\151\057\151ndex.php",$qs); if (strtolower(substr($O15,0,021)) == "\143\157nnection error:") { $O14[]=$O15; } else if (strtolower(substr($O15,0,5)) == "\145rror") { $O14[]=$O15; } else { $O15=json_decode($O15); update_option("\154\145afletmapsmarkerpr\157\137\154icense_key",$lt->lw =$O15[0]); update_option("\154\145afletmapsmarke\162\160\162o_license_lo\143\141\154_key",""); update_option("l\145\141\146letmapsmarkerpr\157\137\154icense_key_tr\151\141\154",$lt->lw =$O15[0]); $l14=__("Your new license\040\167\141s register\145\144\040successfull\171\041","\154mm"); } } } else { if (!function_exists("wp_verify_n\157\156\143e")) { require_once (ABSPATH."wp-includes/\160\154\165ggable.php"); } $O16=( isset ($_POST["\155\141ps_marker_pro_l\151\143\145nse"]) && wp_verify_nonce($_POST["maps_\155\141\162ker_pro_licen\163\145"],"maps_marker_pro_l\151\143\145nse")); if ($O16) { update_option("leafletmapsmar\153\145\162pro_license\137\154\157cal_key",""); update_option("\154eafletmapsmark\145\162\160ro_license_k\145\171",$_POST["\154eafletmapsmarkerp\162\157\137license_key"]); } $lt=Oo(TRUE); } include dirname( __FILE__)."/leaflet-li\143\145\156se.php"; return TRUE; } class Ot { public $Ox; public $l17; public $lw; public $lx; public $O17; public $l18; public $lu; public $Ou; public $lv; public $O18; public $l19; public $Ov; public $O19; public $l1a; public $Oa; public $Oy; public $O1a; public $l1b; function Ot() { $this->Ox =FALSE; $this->l17 =""; $this->O17 =0120; $this->l18 =012; $this->O1b =array("\163pbas"); $this->l1c ="\163\160bas"; $this->lu ="\146ilesystem"; $this->Ov =0; $this->O19 =0; $this->Ou =FALSE; $this->lv =FALSE; $this->O18 =""; $this->l19 ="\154icense.txt"; $this->l1a =FALSE; $this->Oa =FALSE; $this->l1b =FALSE; $this->Oy =array("\143\165\163tom_fields" => array(),"download_access_\145\170\160ires" => 0,"\154\151\143ense_expires" => 0,"local_\153\145\171_expires" => 0,"\163tatus" => "Invalid",); $this->O1a =array("\141\143tive" => __("\124\150is license is a\143\164\151ve.","\154\155\155"),"suspended" => sprintf(__("Error: This licen\163\145\040has been su\163\160\145nded. This\040\165\163ually ha\160\160\145ns when s\157\155\145one trie\163\040\164o regi\163\164\145r a seco\156\144\040trial \154\151\143ense for\040\164\150e same \144\157\155ain. <a\040\150ref=\042%\061\163\042 ta\162\147et=\042_b\154\141\156k\042\076\120\154ease c\154\151\143k here\040\164o get a no\156\055expiring \154\151cense for\040\164his doma\151\156\056</a>","\154mm"),"\150\164tps://www.mapsmar\153\145\162.com/order"),"expired" => sprintf(__("\131our free 30 day \164\162\151al license \153\145\171 has expired\056\040\074a href=\042\045\061s\042 \164\141\162get=\042\137\142lank\042>P\154\145\141se purc\150\141\163e a val\151\144\040pro lic\145\156\163e key t\157\040\143ontinu\145\074/a>.","lmm"),"\150ttps://www.ma\160\163\155arker.com/orde\162"),"pend\151\156\147" => __("Error: Th\151\163\040license is pe\156\144\151ng review.","\154mm"),"\144ownload_acce\163\163\137expired" => __("\105rror: This ve\162\163\151on of the so\146\164\167are was rel\145\141\163ed after y\157\165\162 download\040\141ccess expir\145\144\056 Pleas\145\040\162enew yo\165\162\040downlo\141\144\040and su\160\160\157rt acces\163\040\157r down\147\162\141de to a\040\160revious v\145\162\163ion.","lmm"),"missing_l\151\143\145nse_key" => __("\120lease enter \141\040\154icense key to\040\143\157ntinue.","lmm"),"unknown_local_ke\171\137\164ype" => __("\105\162\162or: An unkn\157\167\156 type of loca\154\040\153ey valid\141\164\151on was req\165\145\163ted.","\154\155\155"),"c\157\165\154d_not_obtain_lo\143\141\154_key" => sprintf(__("Error: \141\040\156ew local lic\145\156\163e key could \156\157\164 be obtaine\144\056 Please see %\163\040for more inf\157\162\155ation","lmm"),"\074\141 href=\042ht\164\160\163://www.mapsma\162\153\145r.com/conne\143\164\055errors\042\040\164arget=\042\137\142\154ank\042\076\155\141psmark\145\162\056com/con\156\145\143t-errors\074\057a>"),"maximum_grace_pe\162\151\157d_expired" => __("Error: The maximum \154\157\143al license \153\145\171 grace peri\157\144\040has expir\145\144\056","lmm"),"lo\143\141\154_key_tampering" => __("\105rror: The local l\151\143\145nse key has b\145\145\156 tampered wi\164\150\040or is inv\141\154\151d.","\154\155m"),"\154ocal_key_inval\151\144\137for_location" => __("Error: Th\145\040\154ocal license\040\153\145y is invalid\040\146\157r this loc\141\164\151on.","lmm"),"missing\137\154\151cense_file" => __("\105\162\162or: Please cr\145\141\164e the followin\147\040\146ile (and d\151\162\145ctories if\040\164\150ey do no\164\040\145xist al\162\145\141dy):<br\040\057>\134r\134\156\074br />\134\162\134\156","\154\155m"),"license_fil\145\137\156ot_writable" => __("Error: P\154\145\141se make the fo\154\154\157wing path w\162\151\164able:<br /\076","\154\155m"),"\151nvalid_local\137\153\145y_storage" => __("\105rror: the loca\154\040\153ey storage o\156\040\143lear could\040\156\157t determi\156\145\144.","lmm"),"could_not_\163\141\166e_local_key" => __("Error: th\145\040\154ocal license\040\153\145y could not\040\163\141ved.","lmm"),"licens\145\137\153ey_string_mis\155\141\164ch" => __("\105rror: The loc\141\154\040key is inva\154\151\144 for this l\151\143\145nse.","lmm"),); $this->localization =array("ac\164\151\166e" => __("This license is a\143\164\151ve.","lmm"),"suspended" => sprintf(__("Error: This license\040\150\141s been su\163\160\145nded. This\040\165\163ually ha\160\160\145ns when s\157\155\145one tries\040\164o registe\162\040\141 second\040\164rial licen\163\145\040for the\040\163ame domain\056\040<a href=\042\045\061s\042 \164\141rget=\042_\142\154\141nk\042\076\120lease cli\143\153\040here\040\164\157 get a\040\156on-expiri\156\147\040licen\163\145\040for t\150\151\163 domai\156\056</a>","\154\155\155"),"\150\164tps://www.map\163\155\141rker.com/order"),"expired" => sprintf(__("\131our free 30 day tr\151\141\154 license ke\171\040\150as expired.\040\074a href=\042\045\061\163\042 t\141\162\147et=\042_\142\154\141nk\042>\120\154\145ase pur\143\150\141se a va\154\151\144 pro lic\145\156\163e key t\157\040\143ontinu\145\074\057a>.","\154\155\155"),"\150\164\164ps://www.maps\155\141\162ker.com/orde\162"),"\160\145\156ding" => __("Error:\040\124\150is license is \160\145\156ding review\056","\154\155m"),"\144ownload_access_\145\170\160ired" => __("\105\162ror: This versio\156\040\157f the softw\141\162\145 was release\144\040\141fter you\162\040\144ownload \141\143\143ess expi\162\145\144. Pleas\145\040\162enew yo\165\162\040downlo\141\144\040and sup\160\157\162t acce\163\163\040or dow\156\147\162ade to \141\040previous v\145\162\163ion.","lmm")); } function validate() { if (!$this->lw) { return $this->Ox =$this->O1a["\155issing_license\137\153\145y"]; } if (!in_array(strtolower($this->l1c),$this->O1b)) { return $this->Ox =$this->O1a["u\156\153\156own_local_ke\171\137\164ype"]; } $this->O1c =$this->O1a["could_\156\157\164_obtain_loca\154\137\153ey"]; switch ($this->lu) { case "\144atabase": $l1d=$this->O1d(); break; case "\146ilesystem": $l1d=$this->l1e(); break; default : return $this->Ox =$this->O1a["missing_license_k\145\171"]; } if ($this->Ox == $this->O1c && $this->Ov) { $O1e=$this->l1f($this->O19); if ($O1e["\167\162ite"]) { if ($this->lu == "\144atabase") { $this->O1f($O1e["loca\154\137\153ey"]); } elseif ($this->lu == "filesystem") { $this->l1g($O1e["loca\154\137\153ey"],"{$this->O18}{$this->l19}"); } } if ($O1e["errors"]) { return $this->Ox =$O1e["errors"]; } $this->Ox =FALSE; return $this; } if ($this->Ox) { return $this->Ox; } return $this->O1g($l1d); } function l1h($O1h,$O1e) { return (( integer) $O1h+(( integer) $O1e*0250600)); } function l1f($l1d) { $l1i=$this->O1i($l1d); $l1j=$this->O1j($l1i); $Oy=unserialize($l1j[0]); $O1h=( integer) $Oy["local_key_expires"]; unset ($l1j,$Oy); $l1k=FALSE; $l1j=explode("\012\012",$l1d); $l1d=$l1j[0]; foreach ($Ov=explode("\054",$this->Ov) as $O1k => $O1e) { if (!$O1k) { $l1d.="\012"; } if ($this->l1h($O1h,$O1e)>time()) { continue; } $l1d.= "\012{$O1e}"; $l1k=TRUE; } if (time()>$this->l1h($O1h,array_pop($Ov))) { return array("\167\162ite" => FALSE,"\154\157\143al_key" => "","\145\162\162ors" => $this->O1a["\155\141\170imum_grace_perio\144\137\145xpired"]); } return array("\167rite" => $l1k,"local_key" => $l1d,"\145\162rors" => FALSE); } function l1l($l1d,$O1h) { $O1e=$this->O1j($l1d,"\012\012"); if (! isset ($O1e[1])) { return -1; } return ( integer)($this->l1h($O1h,array_pop(explode("\012",$O1e[1])))-time()); } function O1i($l1d) { return base64_decode(str_replace("\012","",urldecode($l1d))); } function O1j($l1d,$O1l="\173spbas}") { return explode($O1l,$l1d); } function l1m($O1k,$O1m) { return in_array($O1k,(array) $O1m); } function wildcard_ip($O1k) { $octets=explode(".",$O1k); array_pop($octets); $ip_range[]=implode(".",$octets).".*"; array_pop($octets); $ip_range[]=implode("\056",$octets)."\056\052"; array_pop($octets); $ip_range[]=implode("\056",$octets).".*"; return $ip_range; } function wildcard_domain($O1k) { return "*.".str_replace("www.","",$O1k); } function wildcard_server_hostname($O1k) { $hostname=explode("\056",$O1k); unset ($hostname[0]); $hostname=(! isset ($hostname[1])) ? array($O1k): $hostname; return "\052.".implode("\056",$hostname); } function extract_access_set($instances,$enforce) { foreach ($instances as $O1k => $instance) { if ($O1k != $enforce) { continue; } return $instance; } return array(); } function O1g($l1d) { $l1i=$this->O1i($l1d); $l1j=$this->O1j($l1i); if (! isset ($l1j[1])) { return $this->Ox =$this->O1a["\154\157cal_key_tamper\151\156\147"]; } if (md5($this->Ow.$l1j[0]) != $l1j[1]) { return $this->Ox =$this->O1a["\154\157cal_key_tam\160\145\162ing"]; } unset ($this->Ow); $Oy=unserialize($l1j[0]); $instance=$Oy["\151\156stance"]; unset ($Oy["\151nstance"]); $enforce=$Oy["\145nforce"]; unset ($Oy["\145nforce"]); $this->Oy =$Oy; if (( string) $Oy["license_key_strin\147"] != ( string) $this->lw) { return $this->Ox =$this->O1a["\154\151\143ense_key_s\164\162\151ng_mismatch"]; } if (( string) $Oy["st\141\164\165s"] != "\141ctive") { return $this->Ox =$this->O1a[$Oy["status"]]; } if (( string) $Oy["license_ex\160\151\162es"] != "never" && ( integer) $Oy["license_expi\162\145\163"]<time()) { return $this->Ox =$this->O1a["expired"]; } if (( string) $Oy["\154ocal_key_expir\145\163"] != "\156\145ver" && ( integer) $Oy["local_k\145\171\137expires"]<time()) { if ($this->l1l($l1d,$Oy["local_key_\145\170\160ires"])<0) { $this->l1n(TRUE); return $this->validate(); } } if ($this->l1a && ( integer) $Oy["\144\157\167nload_access\137\145\170pires"]<strtotime($this->Oa)) { return $this->Ox =$this->O1a["\144\157\167nload_access_\145\170\160ired"]; } $conflicts=array(); $O1n=$this->l1o(); foreach ((array) $enforce as $O1k) { $O1m=$this->extract_access_set($instance,$O1k); if (!$this->l1m($O1n[$O1k],$O1m)) { $conflicts[$O1k]=TRUE; if (in_array($O1k,array("ip","s\145\162\166er_ip"))) { foreach ($this->wildcard_ip($O1n[$O1k]) as $ip) { if ($this->l1m($ip,$O1m)) { unset ($conflicts[$O1k]); break; } } } elseif (in_array($O1k,array("\144\157main"))) { if ($this->l1m($this->wildcard_domain($O1n[$O1k]),$O1m)) { unset ($conflicts[$O1k]); } } elseif (in_array($O1k,array("serv\145\162\137hostname"))) { if ($this->l1m($this->wildcard_server_hostname($O1n[$O1k]),$O1m)) { unset ($conflicts[$O1k]); } } } } if (!empty($conflicts)) { return $this->Ox =$this->O1a["\154\157cal_key_invalid_\146\157\162_location"]; } } function O1d() { $Oe=array(); if (is_array($this->Ou)) { $Oe=$this->Ou; } else { $query=@mysql_query($this->Ou); if ($mysql_error=mysql_error()) { return $this->Ox = "\105rror: {$mysql_error}"; } $Oe=@mysql_fetch_assoc($query); if ($mysql_error=mysql_error()) { return $this->Ox = "Er\162\157\162: {$mysql_error}"; } } if (!$Oe["local_key"]) { $Oe["\154\157cal_key"]=$this->O1o(); if ($this->Ox) { return $this->Ox; } $this->O1f($Oe["local_key"]); } return $this->O19 =$Oe["\154ocal_key"]; } function O1f($l1d) { if (is_array($this->lv)) { $l1p=$this->lv["function"]; return $l1p($this->lv["key"],$l1d); }@mysql_query(str_replace("\173local_key}",$l1d,$this->lv)); if ($mysql_error=mysql_error()) { return $this->Ox = "\105rror: {$mysql_error}"; } return TRUE; } function l1e() { if (!file_exists($path= "{$this->O18}{$this->l19}")) { return $this->Ox =$this->O1a["missing_li\143\145nse_file"].$path; } if (!is_writable($path)) { return $this->Ox =$this->O1a["\154\151cense_file_not_w\162\151\164able"].$path; } if (!$l1d=@file_get_contents($path)) { $l1d=$this->O1o(); if ($this->Ox) { return $this->Ox; } $this->l1g(urldecode($l1d),$path); } return $this->O19 =$l1d; } function l1n($clear=FALSE) { switch (strtolower($this->lu)) { case "\144\141tabase": $this->O1f(""); break; case "\146ilesystem": $this->l1g("","{$this->O18}{$this->l19}"); break; default : return $this->Ox =$this->O1a["invalid\137\154\157cal_key_stora\147\145"]; } } function l1g($l1d,$path) { $fp=@fopen($path,"w"); if (!$fp) { return $this->Ox =$this->O1a["could\137\156\157t_save_local_\153\145\171"]; }@fwrite($fp,$l1d); @fclose($fp); return TRUE; } function O1o() { $querystring= "mod=license\046\164ask=SPBAS_valid\141\164\145_license&lic\145\156\163e_key={$this->lw}&"; $querystring.=$this->build_querystring($this->l1o()); if ($this->Ox) { return FALSE; } $Oe=$this->l16($this->lx ,$querystring); if (strtolower(substr($Oe,0,021)) == "\143\157nnection error:") { $this->l17 =$Oe; return FALSE; } if (!$Oe) { $this->Ox =$this->O1a["coul\144\137\156ot_obtain_lo\143\141\154_key"]; return FALSE; } if (substr($Oe,0,7) == "Invalid") { $this->Ox =str_replace("\111\156\166alid","Err\157\162",$Oe); return FALSE; } if (substr($Oe,0,5) == "\105rror") { $this->Ox =$Oe; return FALSE; } return $Oe; } function build_querystring($array) { $buffer=""; foreach ((array) $array as $O1k => $value) { if ($buffer) { $buffer.="&"; } $buffer.= "{$O1k}\075{$value}"; } return $buffer; } function l1o() { $O1n=array(); $O1n["domain"]=""; $O1n["\151p"]="\151\160\055not-transmit\164\145\144"; $O1n["directory"]="\144\151\162ectory-not-tran\163\155\151tted"; $O1n["\163erver_hostname"]="\163erver_hostname\055\156\157t-transmit\164\145\144"; $O1n["server_ip"]="\163\145\162ver_ip-not-tr\141\156\163mitted"; $O1n["\166\141lid_for_prod\165\143\164_tiers"]=""; if (!extension_loaded("suhosin") || !defined( "SUHOSIN_PATCH")) { if (function_exists("\160hpinfo")) { ob_start(); phpinfo(INFO_GENERAL); phpinfo(INFO_ENVIRONMENT); $phpinfo=ob_get_contents(); ob_end_clean(); $list=strip_tags($phpinfo); $O1n["domain"]=$this->scrape_phpinfo($list,"\110\124\124P_HOST"); } } $O1n["\144omain"]=($O1n["domain"]) ? $O1n["domain"]: $_SERVER["\110\124\124P_HOST"]; foreach ($O1n as $O1k => $value) { if ($O1k == "valid_for\137\160\162oduct_tiers") { continue; } $O1n[$O1k]=($O1n[$O1k]) ? $O1n[$O1k]: "\125\156\153nown"; } if ($this->l1b) { $O1n["valid_for_produc\164\137\164iers"]=$this->l1b; } return $O1n; } function path_translated() { $option=array("\120ATH_TRANSLATED","\174|IG_PATH_TRANSL\101\124\105D","S\103\122\111PT_FILENAME","\104\117\103UMENT_ROOT","\101\120\120L_PHYSICAL_PATH"); foreach ($option as $O1k) { if (! isset ($_SERVER[$O1k]) || strlen(trim($_SERVER[$O1k]))<=0) { continue; } if ($this->is_windows() && strpos($_SERVER[$O1k],"\134")) { return @substr($_SERVER[$O1k],0,@strrpos($_SERVER[$O1k],"\134")); } return @substr($_SERVER[$O1k],0,@strrpos($_SERVER[$O1k],"/")); } return FALSE; } function server_addr() { $options=array("\123ERVER_ADDR","\114\117CAL_ADDR"); foreach ($options as $O1k) { if ( isset ($_SERVER[$O1k])) { return $_SERVER[$O1k]; } } return FALSE; } function scrape_phpinfo($all,$target) { $all=explode($target,$all); if (count($all)<2) { return FALSE; } $all=explode("\012",$all[1]); $all=trim($all[0]); if ($target == "\123ystem") { $all=explode("\040",$all); $all=trim($all[(strtolower($all[0]) == "window\163" && strtolower($all[1]) == "\156t") ? 2: 1]); } if ($target == "S\103\122\111PT_FILENAME") { $slash=($this->is_windows() ? "\134": "/"); $all=explode($slash,$all); array_pop($all); $all=implode($slash,$all); } if (substr($all,1,1) == "\135") { return FALSE; } return $all; } function l16($url,$querystring) { $Oe=wp_remote_get($url."?".$querystring,array("\163\163lverify" => FALSE,"\164imeout" => 024)); if (is_wp_error($Oe)) { $O1p="Connection er\162\157\162: ".$Oe->get_error_message()."\074\142r/>".sprintf(__("Error: a new loca\154\040\154icense key \143\157\165ld not be \157\142\164ained. Ple\141\163\145 see %s f\157\162\040more in\146\157\162mation","\154\155m"),"\074a href=\042\150\164\164ps://www.ma\160\163\155arker.com/c\157\156\156ect-errors\042\040target=\042\137\142lank\042>m\141\160\163marker.\143\157\155/connec\164\055\145rrors<\057\141\076"); return $O1p; } else { if (( integer) $Oe["response"]["cod\145"] == 0310) { return $Oe["\142\157\144y"]; } else { $O1p="\103onnection err\157\162\072 HTTP statu\163\040\143ode ".$Oe["response"]["\143\157\144e"]."\040- ".$Oe["body"]; return $O1p; } } } function is_windows() { $l1q=explode("\054",ini_get("\144isable_funct\151\157\156s")); foreach ($l1q as $O1q) { $l1r[]=trim($O1q); } if (!in_array("php_uname",$l1r)) { return (strtolower(substr(php_uname(),0,7)) == "\167indows"); } else { return (stristr( PHP_OS ,"WIN")); } } function pr($stack,$O1r=TRUE) { $formatted="\074\160re>".var_export((array) $stack,1)."\074\057pre>"; if ($O1r) { exit ($formatted); } return $formatted; } } $l1s=new l4(); if (is_admin()) { if (la()) { if (extension_loaded("\151\157nCube Loader") && version_compare(phpversion(),"5.5","<")) { if (function_exists("\151\157ncube_loader_ive\162\163\151on")) { $O1s=ioncube_loader_iversion(); $l1t=( integer) substr($O1s,0,1); } else { $O1t=ioncube_loader_version(); $l1t=( integer) substr($O1t,0,1); } if ($l1t>=4) { $l1u="\150\164tps://www.maps\155\141\162ker.com/up\144\141\164es/?action\075\147\145t_metadat\141\046\163lug=lea\146\154\145t-maps-\155\141\162ker-pro"; } else { $l1u="\150\164tps://www.mapsma\162\153\145r.com/updates\055\160\162o/?action\075\147\145t_metadata\046\163\154ug=leafl\145\164\055maps-ma\162\153\145r-pro"; } } else { $l1u="http\163\072\057/www.mapsma\162\153\145r.com/update\163\055\160ro/?actio\156\075\147et_metada\164\141\046slug=lea\146\154\145t-maps-\155\141\162ker-pro"; } $O4=get_option("leafletmapsm\141\162\153er_options"); if (( isset ($O4["\155isc_betatest"])) && ($O4["misc_betatest"] == "enabled")) { $l1u=$l1u."\055beta"; } $O1u=new pluginupdatechecker_1_5($l1u,plugin_dir_path( __FILE__)."\154eaflet-ma\160\163-marker.php","leaflet-\155\141\160s-marker-pro","\0612","leafletmapsmar\153\145\162pro_pluginu\160\144\141techecker"); } unset ($O1u); } register_activation_hook( __FILE__ ,array("\114\145afletmapsmarker\120\162\157","\154mm_register_act\151\166\141tion_hook")); require_once (plugin_dir_path( __FILE__)."inc".DIRECTORY_SEPARATOR."\143\154ass-leaflet-re\143\145\156t-marker-wid\147\145\164.php"); unset ($l1s); ?>